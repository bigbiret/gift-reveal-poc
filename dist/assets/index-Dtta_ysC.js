var ht=Object.defineProperty;var ft=(t,e,r)=>e in t?ht(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var vt=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var A=(t,e,r)=>ft(t,typeof e!="symbol"?e+"":e,r);var cr=vt((dr,ue)=>{(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function r(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function n(a){if(a.ep)return;a.ep=!0;const l=r(a);fetch(a.href,l)}})();class gt{constructor(){A(this,"routes",[]);A(this,"basePath");this.basePath="/gift-reveal-poc/",this.basePath!=="/"&&this.basePath.endsWith("/")&&(this.basePath=this.basePath.slice(0,-1))}register(e,r){this.routes.push({pattern:e,handler:r})}async navigate(e){let r=e;this.basePath!=="/"&&e.startsWith(this.basePath)&&(r=e.slice(this.basePath.length)),!r||r===""?r="/":r.startsWith("/")||(r=`/${r}`),console.log("[Router] Navigate:",{originalPath:e,basePath:this.basePath,cleanPath:r,routes:this.routes.length});for(const n of this.routes){const a=r.match(n.pattern);if(a){console.log("[Router] Matched route:",n.pattern),await n.handler(a);return}}console.warn(`[Router] No route found for path: ${e} (clean: ${r})`)}getCurrentPath(){let e=window.location.pathname;return this.basePath!=="/"&&e.startsWith(this.basePath)&&(e=e.slice(this.basePath.length)),e||"/"}}var Ve={update:null,begin:null,loopBegin:null,changeBegin:null,change:null,changeComplete:null,loopComplete:null,complete:null,loop:1,direction:"normal",autoplay:!0,timelineOffset:0},we={duration:1e3,delay:0,endDelay:0,easing:"easeOutElastic(1, .5)",round:0},mt=["translateX","translateY","translateZ","rotate","rotateX","rotateY","rotateZ","scale","scaleX","scaleY","scaleZ","skew","skewX","skewY","perspective","matrix","matrix3d"],he={CSS:{},springs:{}};function K(t,e,r){return Math.min(Math.max(t,e),r)}function ce(t,e){return t.indexOf(e)>-1}function pe(t,e){return t.apply(null,e)}var g={arr:function(t){return Array.isArray(t)},obj:function(t){return ce(Object.prototype.toString.call(t),"Object")},pth:function(t){return g.obj(t)&&t.hasOwnProperty("totalLength")},svg:function(t){return t instanceof SVGElement},inp:function(t){return t instanceof HTMLInputElement},dom:function(t){return t.nodeType||g.svg(t)},str:function(t){return typeof t=="string"},fnc:function(t){return typeof t=="function"},und:function(t){return typeof t>"u"},nil:function(t){return g.und(t)||t===null},hex:function(t){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(t)},rgb:function(t){return/^rgb/.test(t)},hsl:function(t){return/^hsl/.test(t)},col:function(t){return g.hex(t)||g.rgb(t)||g.hsl(t)},key:function(t){return!Ve.hasOwnProperty(t)&&!we.hasOwnProperty(t)&&t!=="targets"&&t!=="keyframes"}};function je(t){var e=/\(([^)]+)\)/.exec(t);return e?e[1].split(",").map(function(r){return parseFloat(r)}):[]}function ze(t,e){var r=je(t),n=K(g.und(r[0])?1:r[0],.1,100),a=K(g.und(r[1])?100:r[1],.1,100),l=K(g.und(r[2])?10:r[2],.1,100),c=K(g.und(r[3])?0:r[3],.1,100),d=Math.sqrt(a/n),o=l/(2*Math.sqrt(a*n)),S=o<1?d*Math.sqrt(1-o*o):0,h=1,f=o<1?(o*d+-c)/S:-c+d;function x(P){var b=e?e*P/1e3:P;return o<1?b=Math.exp(-b*o*d)*(h*Math.cos(S*b)+f*Math.sin(S*b)):b=(h+f*b)*Math.exp(-b*d),P===0||P===1?P:1-b}function $(){var P=he.springs[t];if(P)return P;for(var b=1/6,M=0,F=0;;)if(M+=b,x(M)===1){if(F++,F>=16)break}else F=0;var w=M*b*1e3;return he.springs[t]=w,w}return e?x:$}function pt(t){return t===void 0&&(t=10),function(e){return Math.ceil(K(e,1e-6,1)*t)*(1/t)}}var yt=function(){var t=11,e=1/(t-1);function r(h,f){return 1-3*f+3*h}function n(h,f){return 3*f-6*h}function a(h){return 3*h}function l(h,f,x){return((r(f,x)*h+n(f,x))*h+a(f))*h}function c(h,f,x){return 3*r(f,x)*h*h+2*n(f,x)*h+a(f)}function d(h,f,x,$,P){var b,M,F=0;do M=f+(x-f)/2,b=l(M,$,P)-h,b>0?x=M:f=M;while(Math.abs(b)>1e-7&&++F<10);return M}function o(h,f,x,$){for(var P=0;P<4;++P){var b=c(f,x,$);if(b===0)return f;var M=l(f,x,$)-h;f-=M/b}return f}function S(h,f,x,$){if(!(0<=h&&h<=1&&0<=x&&x<=1))return;var P=new Float32Array(t);if(h!==f||x!==$)for(var b=0;b<t;++b)P[b]=l(b*e,h,x);function M(F){for(var w=0,p=1,H=t-1;p!==H&&P[p]<=F;++p)w+=e;--p;var Y=(F-P[p])/(P[p+1]-P[p]),B=w+Y*e,_=c(B,h,x);return _>=.001?o(F,B,h,x):_===0?B:d(F,w,w+e,h,x)}return function(F){return h===f&&x===$||F===0||F===1?F:l(M(F),f,$)}}return S}(),Ue=function(){var t={linear:function(){return function(n){return n}}},e={Sine:function(){return function(n){return 1-Math.cos(n*Math.PI/2)}},Expo:function(){return function(n){return n?Math.pow(2,10*n-10):0}},Circ:function(){return function(n){return 1-Math.sqrt(1-n*n)}},Back:function(){return function(n){return n*n*(3*n-2)}},Bounce:function(){return function(n){for(var a,l=4;n<((a=Math.pow(2,--l))-1)/11;);return 1/Math.pow(4,3-l)-7.5625*Math.pow((a*3-2)/22-n,2)}},Elastic:function(n,a){n===void 0&&(n=1),a===void 0&&(a=.5);var l=K(n,1,10),c=K(a,.1,2);return function(d){return d===0||d===1?d:-l*Math.pow(2,10*(d-1))*Math.sin((d-1-c/(Math.PI*2)*Math.asin(1/l))*(Math.PI*2)/c)}}},r=["Quad","Cubic","Quart","Quint"];return r.forEach(function(n,a){e[n]=function(){return function(l){return Math.pow(l,a+2)}}}),Object.keys(e).forEach(function(n){var a=e[n];t["easeIn"+n]=a,t["easeOut"+n]=function(l,c){return function(d){return 1-a(l,c)(1-d)}},t["easeInOut"+n]=function(l,c){return function(d){return d<.5?a(l,c)(d*2)/2:1-a(l,c)(d*-2+2)/2}},t["easeOutIn"+n]=function(l,c){return function(d){return d<.5?(1-a(l,c)(1-d*2))/2:(a(l,c)(d*2-1)+1)/2}}}),t}();function Me(t,e){if(g.fnc(t))return t;var r=t.split("(")[0],n=Ue[r],a=je(t);switch(r){case"spring":return ze(t,e);case"cubicBezier":return pe(yt,a);case"steps":return pe(pt,a);default:return pe(n,a)}}function We(t){try{var e=document.querySelectorAll(t);return e}catch{return}}function fe(t,e){for(var r=t.length,n=arguments.length>=2?arguments[1]:void 0,a=[],l=0;l<r;l++)if(l in t){var c=t[l];e.call(n,c,l,t)&&a.push(c)}return a}function ve(t){return t.reduce(function(e,r){return e.concat(g.arr(r)?ve(r):r)},[])}function Fe(t){return g.arr(t)?t:(g.str(t)&&(t=We(t)||t),t instanceof NodeList||t instanceof HTMLCollection?[].slice.call(t):[t])}function Te(t,e){return t.some(function(r){return r===e})}function ke(t){var e={};for(var r in t)e[r]=t[r];return e}function ye(t,e){var r=ke(t);for(var n in t)r[n]=e.hasOwnProperty(n)?e[n]:t[n];return r}function ge(t,e){var r=ke(t);for(var n in e)r[n]=g.und(t[n])?e[n]:t[n];return r}function bt(t){var e=/rgb\((\d+,\s*[\d]+,\s*[\d]+)\)/g.exec(t);return e?"rgba("+e[1]+",1)":t}function wt(t){var e=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,r=t.replace(e,function(d,o,S,h){return o+o+S+S+h+h}),n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(r),a=parseInt(n[1],16),l=parseInt(n[2],16),c=parseInt(n[3],16);return"rgba("+a+","+l+","+c+",1)"}function Mt(t){var e=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(t)||/hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*([\d.]+)\)/g.exec(t),r=parseInt(e[1],10)/360,n=parseInt(e[2],10)/100,a=parseInt(e[3],10)/100,l=e[4]||1;function c(x,$,P){return P<0&&(P+=1),P>1&&(P-=1),P<1/6?x+($-x)*6*P:P<1/2?$:P<2/3?x+($-x)*(2/3-P)*6:x}var d,o,S;if(n==0)d=o=S=a;else{var h=a<.5?a*(1+n):a+n-a*n,f=2*a-h;d=c(f,h,r+1/3),o=c(f,h,r),S=c(f,h,r-1/3)}return"rgba("+d*255+","+o*255+","+S*255+","+l+")"}function Tt(t){if(g.rgb(t))return bt(t);if(g.hex(t))return wt(t);if(g.hsl(t))return Mt(t)}function X(t){var e=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/.exec(t);if(e)return e[1]}function kt(t){if(ce(t,"translate")||t==="perspective")return"px";if(ce(t,"rotate")||ce(t,"skew"))return"deg"}function be(t,e){return g.fnc(t)?t(e.target,e.id,e.total):t}function Z(t,e){return t.getAttribute(e)}function xe(t,e,r){var n=X(e);if(Te([r,"deg","rad","turn"],n))return e;var a=he.CSS[e+r];if(!g.und(a))return a;var l=100,c=document.createElement(t.tagName),d=t.parentNode&&t.parentNode!==document?t.parentNode:document.body;d.appendChild(c),c.style.position="absolute",c.style.width=l+r;var o=l/c.offsetWidth;d.removeChild(c);var S=o*parseFloat(e);return he.CSS[e+r]=S,S}function Ye(t,e,r){if(e in t.style){var n=e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),a=t.style[e]||getComputedStyle(t).getPropertyValue(n)||"0";return r?xe(t,a,r):a}}function Se(t,e){if(g.dom(t)&&!g.inp(t)&&(!g.nil(Z(t,e))||g.svg(t)&&t[e]))return"attribute";if(g.dom(t)&&Te(mt,e))return"transform";if(g.dom(t)&&e!=="transform"&&Ye(t,e))return"css";if(t[e]!=null)return"object"}function Ge(t){if(g.dom(t)){for(var e=t.style.transform||"",r=/(\w+)\(([^)]*)\)/g,n=new Map,a;a=r.exec(e);)n.set(a[1],a[2]);return n}}function xt(t,e,r,n){var a=ce(e,"scale")?1:0+kt(e),l=Ge(t).get(e)||a;return r&&(r.transforms.list.set(e,l),r.transforms.last=e),n?xe(t,l,n):l}function Pe(t,e,r,n){switch(Se(t,e)){case"transform":return xt(t,e,n,r);case"css":return Ye(t,e,r);case"attribute":return Z(t,e);default:return t[e]||0}}function Ee(t,e){var r=/^(\*=|\+=|-=)/.exec(t);if(!r)return t;var n=X(t)||0,a=parseFloat(e),l=parseFloat(t.replace(r[0],""));switch(r[0][0]){case"+":return a+l+n;case"-":return a-l+n;case"*":return a*l+n}}function Ke(t,e){if(g.col(t))return Tt(t);if(/\s/g.test(t))return t;var r=X(t),n=r?t.substr(0,t.length-r.length):t;return e?n+e:n}function Ae(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function St(t){return Math.PI*2*Z(t,"r")}function Pt(t){return Z(t,"width")*2+Z(t,"height")*2}function Et(t){return Ae({x:Z(t,"x1"),y:Z(t,"y1")},{x:Z(t,"x2"),y:Z(t,"y2")})}function Ze(t){for(var e=t.points,r=0,n,a=0;a<e.numberOfItems;a++){var l=e.getItem(a);a>0&&(r+=Ae(n,l)),n=l}return r}function At(t){var e=t.points;return Ze(t)+Ae(e.getItem(e.numberOfItems-1),e.getItem(0))}function _e(t){if(t.getTotalLength)return t.getTotalLength();switch(t.tagName.toLowerCase()){case"circle":return St(t);case"rect":return Pt(t);case"line":return Et(t);case"polyline":return Ze(t);case"polygon":return At(t)}}function It(t){var e=_e(t);return t.setAttribute("stroke-dasharray",e),e}function Ct(t){for(var e=t.parentNode;g.svg(e)&&g.svg(e.parentNode);)e=e.parentNode;return e}function Qe(t,e){var r=e||{},n=r.el||Ct(t),a=n.getBoundingClientRect(),l=Z(n,"viewBox"),c=a.width,d=a.height,o=r.viewBox||(l?l.split(" "):[0,0,c,d]);return{el:n,viewBox:o,x:o[0]/1,y:o[1]/1,w:c,h:d,vW:o[2],vH:o[3]}}function Ot(t,e){var r=g.str(t)?We(t)[0]:t,n=e||100;return function(a){return{property:a,el:r,svg:Qe(r),totalLength:_e(r)*(n/100)}}}function Lt(t,e,r){function n(h){h===void 0&&(h=0);var f=e+h>=1?e+h:0;return t.el.getPointAtLength(f)}var a=Qe(t.el,t.svg),l=n(),c=n(-1),d=n(1),o=r?1:a.w/a.vW,S=r?1:a.h/a.vH;switch(t.property){case"x":return(l.x-a.x)*o;case"y":return(l.y-a.y)*S;case"angle":return Math.atan2(d.y-c.y,d.x-c.x)*180/Math.PI}}function Re(t,e){var r=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?/g,n=Ke(g.pth(t)?t.totalLength:t,e)+"";return{original:n,numbers:n.match(r)?n.match(r).map(Number):[0],strings:g.str(t)||e?n.split(r):[]}}function Ie(t){var e=t?ve(g.arr(t)?t.map(Fe):Fe(t)):[];return fe(e,function(r,n,a){return a.indexOf(r)===n})}function Xe(t){var e=Ie(t);return e.map(function(r,n){return{target:r,id:n,total:e.length,transforms:{list:Ge(r)}}})}function Bt(t,e){var r=ke(e);if(/^spring/.test(r.easing)&&(r.duration=ze(r.easing)),g.arr(t)){var n=t.length,a=n===2&&!g.obj(t[0]);a?t={value:t}:g.fnc(e.duration)||(r.duration=e.duration/n)}var l=g.arr(t)?t:[t];return l.map(function(c,d){var o=g.obj(c)&&!g.pth(c)?c:{value:c};return g.und(o.delay)&&(o.delay=d?0:e.delay),g.und(o.endDelay)&&(o.endDelay=d===l.length-1?e.endDelay:0),o}).map(function(c){return ge(c,r)})}function Ft(t){for(var e=fe(ve(t.map(function(l){return Object.keys(l)})),function(l){return g.key(l)}).reduce(function(l,c){return l.indexOf(c)<0&&l.push(c),l},[]),r={},n=function(l){var c=e[l];r[c]=t.map(function(d){var o={};for(var S in d)g.key(S)?S==c&&(o.value=d[S]):o[S]=d[S];return o})},a=0;a<e.length;a++)n(a);return r}function Rt(t,e){var r=[],n=e.keyframes;n&&(e=ge(Ft(n),e));for(var a in e)g.key(a)&&r.push({name:a,tweens:Bt(e[a],t)});return r}function Dt(t,e){var r={};for(var n in t){var a=be(t[n],e);g.arr(a)&&(a=a.map(function(l){return be(l,e)}),a.length===1&&(a=a[0])),r[n]=a}return r.duration=parseFloat(r.duration),r.delay=parseFloat(r.delay),r}function Nt(t,e){var r;return t.tweens.map(function(n){var a=Dt(n,e),l=a.value,c=g.arr(l)?l[1]:l,d=X(c),o=Pe(e.target,t.name,d,e),S=r?r.to.original:o,h=g.arr(l)?l[0]:S,f=X(h)||X(o),x=d||f;return g.und(c)&&(c=S),a.from=Re(h,x),a.to=Re(Ee(c,h),x),a.start=r?r.end:0,a.end=a.start+a.delay+a.duration+a.endDelay,a.easing=Me(a.easing,a.duration),a.isPath=g.pth(l),a.isPathTargetInsideSVG=a.isPath&&g.svg(e.target),a.isColor=g.col(a.from.original),a.isColor&&(a.round=1),r=a,a})}var Je={css:function(t,e,r){return t.style[e]=r},attribute:function(t,e,r){return t.setAttribute(e,r)},object:function(t,e,r){return t[e]=r},transform:function(t,e,r,n,a){if(n.list.set(e,r),e===n.last||a){var l="";n.list.forEach(function(c,d){l+=d+"("+c+") "}),t.style.transform=l}}};function et(t,e){var r=Xe(t);r.forEach(function(n){for(var a in e){var l=be(e[a],n),c=n.target,d=X(l),o=Pe(c,a,d,n),S=d||X(o),h=Ee(Ke(l,S),o),f=Se(c,a);Je[f](c,a,h,n.transforms,!0)}})}function $t(t,e){var r=Se(t.target,e.name);if(r){var n=Nt(e,t),a=n[n.length-1];return{type:r,property:e.name,animatable:t,tweens:n,duration:a.end,delay:n[0].delay,endDelay:a.endDelay}}}function Ht(t,e){return fe(ve(t.map(function(r){return e.map(function(n){return $t(r,n)})})),function(r){return!g.und(r)})}function tt(t,e){var r=t.length,n=function(l){return l.timelineOffset?l.timelineOffset:0},a={};return a.duration=r?Math.max.apply(Math,t.map(function(l){return n(l)+l.duration})):e.duration,a.delay=r?Math.min.apply(Math,t.map(function(l){return n(l)+l.delay})):e.delay,a.endDelay=r?a.duration-Math.max.apply(Math,t.map(function(l){return n(l)+l.duration-l.endDelay})):e.endDelay,a}var De=0;function qt(t){var e=ye(Ve,t),r=ye(we,t),n=Rt(r,t),a=Xe(t.targets),l=Ht(a,n),c=tt(l,r),d=De;return De++,ge(e,{id:d,children:[],animatables:a,animations:l,duration:c.duration,delay:c.delay,endDelay:c.endDelay})}var W=[],rt=function(){var t;function e(){!t&&(!Ne()||!u.suspendWhenDocumentHidden)&&W.length>0&&(t=requestAnimationFrame(r))}function r(a){for(var l=W.length,c=0;c<l;){var d=W[c];d.paused?(W.splice(c,1),l--):(d.tick(a),c++)}t=c>0?requestAnimationFrame(r):void 0}function n(){u.suspendWhenDocumentHidden&&(Ne()?t=cancelAnimationFrame(t):(W.forEach(function(a){return a._onDocumentVisibility()}),rt()))}return typeof document<"u"&&document.addEventListener("visibilitychange",n),e}();function Ne(){return!!document&&document.hidden}function u(t){t===void 0&&(t={});var e=0,r=0,n=0,a,l=0,c=null;function d(w){var p=window.Promise&&new Promise(function(H){return c=H});return w.finished=p,p}var o=qt(t);d(o);function S(){var w=o.direction;w!=="alternate"&&(o.direction=w!=="normal"?"normal":"reverse"),o.reversed=!o.reversed,a.forEach(function(p){return p.reversed=o.reversed})}function h(w){return o.reversed?o.duration-w:w}function f(){e=0,r=h(o.currentTime)*(1/u.speed)}function x(w,p){p&&p.seek(w-p.timelineOffset)}function $(w){if(o.reversePlayback)for(var H=l;H--;)x(w,a[H]);else for(var p=0;p<l;p++)x(w,a[p])}function P(w){for(var p=0,H=o.animations,Y=H.length;p<Y;){var B=H[p],_=B.animatable,re=B.tweens,J=re.length-1,R=re[J];J&&(R=fe(re,function(E){return w<E.end})[0]||R);for(var ee=K(w-R.start-R.delay,0,R.duration)/R.duration,se=isNaN(ee)?1:R.easing(ee),j=R.to.strings,le=R.round,ne=[],de=R.to.numbers.length,te=void 0,ae=0;ae<de;ae++){var ie=void 0,s=R.to.numbers[ae],i=R.from.numbers[ae]||0;R.isPath?ie=Lt(R.value,se*s,R.isPathTargetInsideSVG):ie=i+se*(s-i),le&&(R.isColor&&ae>2||(ie=Math.round(ie*le)/le)),ne.push(ie)}var v=j.length;if(!v)te=ne[0];else{te=j[0];for(var m=0;m<v;m++){j[m];var T=j[m+1],k=ne[m];isNaN(k)||(T?te+=k+T:te+=k+" ")}}Je[B.type](_.target,B.property,te,_.transforms),B.currentValue=te,p++}}function b(w){o[w]&&!o.passThrough&&o[w](o)}function M(){o.remaining&&o.remaining!==!0&&o.remaining--}function F(w){var p=o.duration,H=o.delay,Y=p-o.endDelay,B=h(w);o.progress=K(B/p*100,0,100),o.reversePlayback=B<o.currentTime,a&&$(B),!o.began&&o.currentTime>0&&(o.began=!0,b("begin")),!o.loopBegan&&o.currentTime>0&&(o.loopBegan=!0,b("loopBegin")),B<=H&&o.currentTime!==0&&P(0),(B>=Y&&o.currentTime!==p||!p)&&P(p),B>H&&B<Y?(o.changeBegan||(o.changeBegan=!0,o.changeCompleted=!1,b("changeBegin")),b("change"),P(B)):o.changeBegan&&(o.changeCompleted=!0,o.changeBegan=!1,b("changeComplete")),o.currentTime=K(B,0,p),o.began&&b("update"),w>=p&&(r=0,M(),o.remaining?(e=n,b("loopComplete"),o.loopBegan=!1,o.direction==="alternate"&&S()):(o.paused=!0,o.completed||(o.completed=!0,b("loopComplete"),b("complete"),!o.passThrough&&"Promise"in window&&(c(),d(o)))))}return o.reset=function(){var w=o.direction;o.passThrough=!1,o.currentTime=0,o.progress=0,o.paused=!0,o.began=!1,o.loopBegan=!1,o.changeBegan=!1,o.completed=!1,o.changeCompleted=!1,o.reversePlayback=!1,o.reversed=w==="reverse",o.remaining=o.loop,a=o.children,l=a.length;for(var p=l;p--;)o.children[p].reset();(o.reversed&&o.loop!==!0||w==="alternate"&&o.loop===1)&&o.remaining++,P(o.reversed?o.duration:0)},o._onDocumentVisibility=f,o.set=function(w,p){return et(w,p),o},o.tick=function(w){n=w,e||(e=n),F((n+(r-e))*u.speed)},o.seek=function(w){F(h(w))},o.pause=function(){o.paused=!0,f()},o.play=function(){o.paused&&(o.completed&&o.reset(),o.paused=!1,W.push(o),f(),rt())},o.reverse=function(){S(),o.completed=!o.reversed,f()},o.restart=function(){o.reset(),o.play()},o.remove=function(w){var p=Ie(w);nt(p,o)},o.reset(),o.autoplay&&o.play(),o}function $e(t,e){for(var r=e.length;r--;)Te(t,e[r].animatable.target)&&e.splice(r,1)}function nt(t,e){var r=e.animations,n=e.children;$e(t,r);for(var a=n.length;a--;){var l=n[a],c=l.animations;$e(t,c),!c.length&&!l.children.length&&n.splice(a,1)}!r.length&&!n.length&&e.pause()}function Vt(t){for(var e=Ie(t),r=W.length;r--;){var n=W[r];nt(e,n)}}function jt(t,e){e===void 0&&(e={});var r=e.direction||"normal",n=e.easing?Me(e.easing):null,a=e.grid,l=e.axis,c=e.from||0,d=c==="first",o=c==="center",S=c==="last",h=g.arr(t),f=parseFloat(h?t[0]:t),x=h?parseFloat(t[1]):0,$=X(h?t[1]:t)||0,P=e.start||0+(h?f:0),b=[],M=0;return function(F,w,p){if(d&&(c=0),o&&(c=(p-1)/2),S&&(c=p-1),!b.length){for(var H=0;H<p;H++){if(!a)b.push(Math.abs(c-H));else{var Y=o?(a[0]-1)/2:c%a[0],B=o?(a[1]-1)/2:Math.floor(c/a[0]),_=H%a[0],re=Math.floor(H/a[0]),J=Y-_,R=B-re,ee=Math.sqrt(J*J+R*R);l==="x"&&(ee=-J),l==="y"&&(ee=-R),b.push(ee)}M=Math.max.apply(Math,b)}n&&(b=b.map(function(j){return n(j/M)*M})),r==="reverse"&&(b=b.map(function(j){return l?j<0?j*-1:-j:Math.abs(M-j)}))}var se=h?(x-f)/M:f;return P+se*(Math.round(b[w]*100)/100)+$}}function zt(t){t===void 0&&(t={});var e=u(t);return e.duration=0,e.add=function(r,n){var a=W.indexOf(e),l=e.children;a>-1&&W.splice(a,1);function c(x){x.passThrough=!0}for(var d=0;d<l.length;d++)c(l[d]);var o=ge(r,ye(we,t));o.targets=o.targets||t.targets;var S=e.duration;o.autoplay=!1,o.direction=e.direction,o.timelineOffset=g.und(n)?S:Ee(n,S),c(e),e.seek(o.timelineOffset);var h=u(o);c(h),l.push(h);var f=tt(l,t);return e.delay=f.delay,e.endDelay=f.endDelay,e.duration=f.duration,e.seek(0),e.reset(),e.autoplay&&e.play(),e},e}u.version="3.2.1";u.speed=1;u.suspendWhenDocumentHidden=!0;u.running=W;u.remove=Vt;u.get=Pe;u.set=et;u.convertPx=xe;u.path=Ot;u.setDashoffset=It;u.stagger=jt;u.timeline=zt;u.easing=Me;u.penner=Ue;u.random=function(t,e){return Math.floor(Math.random()*(e-t+1))+t};class He{constructor(){A(this,"container",null);A(this,"box");A(this,"lid");A(this,"ribbonV");A(this,"ribbonH");A(this,"bow");A(this,"sparkles",[]);A(this,"idleAnimation",null);A(this,"colors",{box:"#FFB6C1",lid:"#FF69B4",ribbon:"#FF1493",sparkle:"#FFD700"})}async load(e){return this.container=e,this.container.innerHTML=`
      <div class="birthday-container">
        <div class="birthday-box">
          <div class="birthday-body" style="background: ${this.colors.box}"></div>
          <div class="birthday-lid" style="background: ${this.colors.lid}"></div>
          <div class="birthday-ribbon-vertical" style="background: ${this.colors.ribbon}"></div>
          <div class="birthday-ribbon-horizontal" style="background: ${this.colors.ribbon}"></div>
          <div class="birthday-bow" style="background: ${this.colors.ribbon}"></div>
          ${[...Array(6)].map((r,n)=>`
            <div class="sparkle sparkle-${n}" style="background: ${this.colors.sparkle}"></div>
          `).join("")}
        </div>
      </div>
    `,this.box=this.container.querySelector(".birthday-box"),this.lid=this.container.querySelector(".birthday-lid"),this.ribbonV=this.container.querySelector(".birthday-ribbon-vertical"),this.ribbonH=this.container.querySelector(".birthday-ribbon-horizontal"),this.bow=this.container.querySelector(".birthday-bow"),this.sparkles=Array.from(this.container.querySelectorAll(".sparkle")),console.log("[Birthday Animation] Loaded with pink and gold theme"),Promise.resolve()}playIdle(){this.idleAnimation=u({targets:this.box,translateY:[0,-8,0],rotate:[0,-1,1,0],scale:[1,1.02,1],duration:2e3,easing:"easeInOutSine",loop:!0})}stopIdle(){this.idleAnimation&&(this.idleAnimation.pause(),this.idleAnimation=null)}async playReveal(){return console.log("[Birthday Animation] Playing reveal sequence"),this.stopIdle(),u({targets:this.bow,translateY:[0,-20,-60,-120,-250,-400],translateX:[0,5,15,30,50,70],rotate:[0,-25,20,-15,45,90],scale:[1,1.05,1,.8,.6,.3],opacity:[1,1,.9,.7,.4,0],duration:800,easing:"easeInCubic"}),u({targets:this.ribbonV,translateY:[0,-50,-120,-220,-350],rotate:[0,10,25,45,70],opacity:[1,.9,.7,.4,0],scaleX:[1,.9,.7,.5,.3],duration:700,easing:"easeInCubic"}),u({targets:this.ribbonH,translateX:[0,30,80,150,250],translateY:[0,-20,-40,-60,-80],rotate:[0,-15,-30,-50,-75],opacity:[1,.9,.7,.4,0],scaleY:[1,.9,.7,.5,.3],duration:700,easing:"easeInCubic"}),await new Promise(e=>setTimeout(e,700)),u({targets:this.lid,translateY:-350,rotateX:-160,rotateZ:25,opacity:0,duration:600,easing:"easeInCubic"}),u({targets:this.box.querySelector(".birthday-body"),opacity:0,duration:600,easing:"easeOutQuad"}),await new Promise(e=>setTimeout(e,200)),this.sparkles.forEach((e,r)=>{const n=r/this.sparkles.length*Math.PI*2;u({targets:e,translateX:Math.cos(n)*200,translateY:Math.sin(n)*200-80,scale:[0,2.5,0],opacity:[0,1,0],duration:1e3,delay:r*50,easing:"easeOutQuad"})}),await new Promise(e=>setTimeout(e,400)),Promise.resolve()}destroy(){u.remove(this.box),u.remove(this.lid),u.remove(this.ribbonV),u.remove(this.ribbonH),u.remove(this.bow),this.sparkles.forEach(e=>u.remove(e)),this.container&&(this.container.innerHTML="")}}class Ut{constructor(){A(this,"container",null);A(this,"box");A(this,"lid");A(this,"ribbonV");A(this,"ribbonH");A(this,"bow");A(this,"sparkles",[]);A(this,"idleAnimation",null);A(this,"colors",{box:"#2C3E50",lid:"#3498DB",ribbon:"#8B4513",sparkle:"#C0C0C0"})}async load(e){return this.container=e,this.container.innerHTML=`
      <div class="fathersday-container">
        <div class="fathersday-box">
          <div class="fathersday-body" style="background: ${this.colors.box}"></div>
          <div class="fathersday-lid" style="background: ${this.colors.lid}"></div>
          <div class="fathersday-ribbon-vertical" style="background: ${this.colors.ribbon}"></div>
          <div class="fathersday-ribbon-horizontal" style="background: ${this.colors.ribbon}"></div>
          <div class="fathersday-bow" style="background: ${this.colors.ribbon}"></div>
          ${[...Array(4)].map((r,n)=>`
            <div class="sparkle sparkle-${n}" style="background: ${this.colors.sparkle}"></div>
          `).join("")}
        </div>
      </div>
    `,this.box=this.container.querySelector(".fathersday-box"),this.lid=this.container.querySelector(".fathersday-lid"),this.ribbonV=this.container.querySelector(".fathersday-ribbon-vertical"),this.ribbonH=this.container.querySelector(".fathersday-ribbon-horizontal"),this.bow=this.container.querySelector(".fathersday-bow"),this.sparkles=Array.from(this.container.querySelectorAll(".sparkle")),console.log("[Father's Day Animation] Loaded with blue and brown theme"),Promise.resolve()}playIdle(){this.idleAnimation=u({targets:this.box,translateY:[0,-6,0],rotate:[0,-.5,.5,0],scale:[1,1.01,1],duration:2500,easing:"easeInOutSine",loop:!0})}stopIdle(){this.idleAnimation&&(this.idleAnimation.pause(),this.idleAnimation=null)}async playReveal(){return console.log("[Father's Day Animation] Playing reveal sequence"),this.stopIdle(),u({targets:this.bow,translateY:[0,-15,-50,-110,-230,-380],translateX:[0,3,10,25,45,65],rotate:[0,-20,15,-12,35,75],scale:[1,1.03,1,.85,.65,.35],opacity:[1,1,.95,.75,.45,0],duration:900,easing:"easeInCubic"}),u({targets:this.ribbonV,translateY:[0,-45,-110,-200,-330],rotate:[0,8,22,40,65],opacity:[1,.95,.75,.45,0],scaleX:[1,.92,.75,.55,.35],duration:750,easing:"easeInCubic"}),u({targets:this.ribbonH,translateX:[0,25,70,140,240],translateY:[0,-18,-35,-55,-75],rotate:[0,-12,-25,-45,-70],opacity:[1,.95,.75,.45,0],scaleY:[1,.92,.75,.55,.35],duration:750,easing:"easeInCubic"}),await new Promise(e=>setTimeout(e,750)),u({targets:this.lid,translateY:-320,rotateX:-150,rotateZ:20,opacity:0,duration:700,easing:"easeInCubic"}),u({targets:this.box.querySelector(".fathersday-body"),opacity:0,duration:700,easing:"easeOutQuad"}),await new Promise(e=>setTimeout(e,150)),this.sparkles.forEach((e,r)=>{const n=r/this.sparkles.length*Math.PI*2;u({targets:e,translateX:Math.cos(n)*180,translateY:Math.sin(n)*180-70,scale:[0,2,0],opacity:[0,.8,0],duration:1100,delay:r*60,easing:"easeOutQuad"})}),await new Promise(e=>setTimeout(e,450)),Promise.resolve()}destroy(){u.remove(this.box),u.remove(this.lid),u.remove(this.ribbonV),u.remove(this.ribbonH),u.remove(this.bow),this.sparkles.forEach(e=>u.remove(e)),this.container&&(this.container.innerHTML="")}}class Wt{constructor(){A(this,"container",null);A(this,"box");A(this,"boxBottom");A(this,"lid");A(this,"cushion");A(this,"ring");A(this,"idleAnimation",null)}async load(e){return this.container=e,this.container.innerHTML=`
      <div class="wedding-container">
        <div class="wedding-box">
          <div class="wedding-box-bottom"></div>
          <div class="wedding-box-lid"></div>
          <div class="wedding-cushion"></div>
          <div class="wedding-ring"></div>
        </div>
      </div>
    `,this.box=this.container.querySelector(".wedding-box"),this.boxBottom=this.container.querySelector(".wedding-box-bottom"),this.lid=this.container.querySelector(".wedding-box-lid"),this.cushion=this.container.querySelector(".wedding-cushion"),this.ring=this.container.querySelector(".wedding-ring"),console.log("[Wedding Animation] Loaded with jewelry ring box"),Promise.resolve()}playIdle(){this.idleAnimation=u({targets:this.box,translateY:[0,-4,0],scale:[1,1.005,1],duration:3500,easing:"easeInOutSine",loop:!0})}stopIdle(){this.idleAnimation&&(this.idleAnimation.pause(),this.idleAnimation=null)}async playReveal(){return console.log("[Wedding Animation] Playing REVERSE reveal - ring first, box opens after!"),this.stopIdle(),console.log("[Wedding Animation] Ring flying up from closed box"),u({targets:this.ring,translateY:-150,rotate:360,scale:1.4,duration:1e3,easing:"easeOutCubic"}),u({targets:this.ring,boxShadow:[{value:"0 0 20px rgba(255, 215, 0, 0.6), inset 0 0 10px rgba(255, 215, 0, 0.3)"},{value:"0 0 40px rgba(255, 215, 0, 1), inset 0 0 20px rgba(255, 215, 0, 0.7)"},{value:"0 0 30px rgba(255, 215, 0, 0.8), inset 0 0 15px rgba(255, 215, 0, 0.5)"}],duration:1e3,easing:"easeInOutSine"}),await new Promise(e=>setTimeout(e,1e3)),console.log("[Wedding Animation] Ring is up!"),await new Promise(e=>setTimeout(e,500)),console.log("[Wedding Animation] Opening box now"),u({targets:this.lid,rotateX:-180,translateY:-10,duration:1e3,easing:"easeOutCubic"}),u({targets:this.cushion,opacity:0,duration:500,delay:200,easing:"easeOutQuad"}),await new Promise(e=>setTimeout(e,1e3)),await new Promise(e=>setTimeout(e,800)),console.log("[Wedding Animation] Closing box"),u({targets:this.lid,rotateX:0,translateY:0,duration:600,easing:"easeInCubic"}),u({targets:[this.boxBottom,this.lid],opacity:0,duration:400,easing:"easeOutQuad"}),await new Promise(e=>setTimeout(e,600)),Promise.resolve()}destroy(){u.remove(this.box),u.remove(this.boxBottom),u.remove(this.lid),u.remove(this.cushion),u.remove(this.ring),this.container&&(this.container.innerHTML="")}}class Yt{constructor(){A(this,"container",null);A(this,"balloonMain");A(this,"balloon");A(this,"string");A(this,"fragments",[]);A(this,"idleAnimation",null)}async load(e){return this.container=e,this.container.innerHTML=`
      <div class="balloon-container">
        <div class="balloon-main">
          <div class="balloon-balloon"></div>
          <div class="balloon-string"></div>
          ${[...Array(8)].map((r,n)=>`
            <div class="balloon-fragment balloon-fragment-${n}"></div>
          `).join("")}
        </div>
      </div>
    `,this.balloonMain=this.container.querySelector(".balloon-main"),this.balloon=this.container.querySelector(".balloon-balloon"),this.string=this.container.querySelector(".balloon-string"),this.fragments=Array.from(this.container.querySelectorAll(".balloon-fragment")),console.log("[Balloon Animation] Loaded with floating balloon"),Promise.resolve()}playIdle(){this.idleAnimation=u({targets:this.balloonMain,translateY:[0,-15,0],rotate:[0,-2,2,0],duration:2500,easing:"easeInOutSine",loop:!0}),u({targets:this.string,rotate:[0,3,-3,0],duration:3e3,easing:"easeInOutSine",loop:!0})}stopIdle(){this.idleAnimation&&(this.idleAnimation.pause(),this.idleAnimation=null),u.remove(this.string)}async playReveal(){return console.log("[Balloon Animation] Balloon is popping!"),this.stopIdle(),u({targets:this.balloon,scaleX:[1,1.3],scaleY:[1,1.2],duration:400,easing:"easeInOutQuad"}),await new Promise(e=>setTimeout(e,400)),u({targets:this.balloon,scale:[1.3,0],opacity:[1,0],duration:200,easing:"easeOutCubic"}),this.fragments.forEach((e,r)=>{const n=r/this.fragments.length*Math.PI*2,a=120+Math.random()*40;u({targets:e,translateX:Math.cos(n)*a,translateY:Math.sin(n)*a-30,rotate:Math.random()*720-360,scale:[0,1.2,.8,0],opacity:[0,1,.8,0],duration:800,delay:r*30,easing:"easeOutQuad"})}),u({targets:this.string,translateY:100,rotate:[0,45],opacity:[1,0],duration:600,easing:"easeInQuad"}),await new Promise(e=>setTimeout(e,600)),Promise.resolve()}destroy(){u.remove(this.balloonMain),u.remove(this.balloon),u.remove(this.string),this.fragments.forEach(e=>u.remove(e)),this.container&&(this.container.innerHTML="")}}class Gt{static create(e){switch(e){case"birthday":return new He;case"fathersday":return new Ut;case"wedding":return new Wt;case"balloon":return new Yt;case"generic":default:return console.warn(`[AnimationFactory] Unknown theme "${e}", using birthday as fallback`),new He}}static getAvailableThemes(){return["birthday","fathersday","wedding","balloon","generic"]}}var ue={};(function t(e,r,n,a){var l=!!(e.Worker&&e.Blob&&e.Promise&&e.OffscreenCanvas&&e.OffscreenCanvasRenderingContext2D&&e.HTMLCanvasElement&&e.HTMLCanvasElement.prototype.transferControlToOffscreen&&e.URL&&e.URL.createObjectURL),c=typeof Path2D=="function"&&typeof DOMMatrix=="function",d=function(){if(!e.OffscreenCanvas)return!1;try{var s=new OffscreenCanvas(1,1),i=s.getContext("2d");i.fillRect(0,0,1,1);var v=s.transferToImageBitmap();i.createPattern(v,"no-repeat")}catch{return!1}return!0}();function o(){}function S(s){var i=r.exports.Promise,v=i!==void 0?i:e.Promise;return typeof v=="function"?new v(s):(s(o,o),null)}var h=function(s,i){return{transform:function(v){if(s)return v;if(i.has(v))return i.get(v);var m=new OffscreenCanvas(v.width,v.height),T=m.getContext("2d");return T.drawImage(v,0,0),i.set(v,m),m},clear:function(){i.clear()}}}(d,new Map),f=function(){var s=Math.floor(16.666666666666668),i,v,m={},T=0;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(i=function(k){var E=Math.random();return m[E]=requestAnimationFrame(function y(I){T===I||T+s-1<I?(T=I,delete m[E],k()):m[E]=requestAnimationFrame(y)}),E},v=function(k){m[k]&&cancelAnimationFrame(m[k])}):(i=function(k){return setTimeout(k,s)},v=function(k){return clearTimeout(k)}),{frame:i,cancel:v}}(),x=function(){var s,i,v={};function m(T){function k(E,y){T.postMessage({options:E||{},callback:y})}T.init=function(y){var I=y.transferControlToOffscreen();T.postMessage({canvas:I},[I])},T.fire=function(y,I,O){if(i)return k(y,null),i;var D=Math.random().toString(36).slice(2);return i=S(function(L){function N(q){q.data.callback===D&&(delete v[D],T.removeEventListener("message",N),i=null,h.clear(),O(),L())}T.addEventListener("message",N),k(y,D),v[D]=N.bind(null,{data:{callback:D}})}),i},T.reset=function(){T.postMessage({reset:!0});for(var y in v)v[y](),delete v[y]}}return function(){if(s)return s;if(!n&&l){var T=["var CONFETTI, SIZE = {}, module = {};","("+t.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join(`
`);try{s=new Worker(URL.createObjectURL(new Blob([T])))}catch(k){return typeof console<"u"&&typeof console.warn=="function"&&console.warn("üéä Could not load worker",k),null}m(s)}return s}}(),$={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function P(s,i){return i?i(s):s}function b(s){return s!=null}function M(s,i,v){return P(s&&b(s[i])?s[i]:$[i],v)}function F(s){return s<0?0:Math.floor(s)}function w(s,i){return Math.floor(Math.random()*(i-s))+s}function p(s){return parseInt(s,16)}function H(s){return s.map(Y)}function Y(s){var i=String(s).replace(/[^0-9a-f]/gi,"");return i.length<6&&(i=i[0]+i[0]+i[1]+i[1]+i[2]+i[2]),{r:p(i.substring(0,2)),g:p(i.substring(2,4)),b:p(i.substring(4,6))}}function B(s){var i=M(s,"origin",Object);return i.x=M(i,"x",Number),i.y=M(i,"y",Number),i}function _(s){s.width=document.documentElement.clientWidth,s.height=document.documentElement.clientHeight}function re(s){var i=s.getBoundingClientRect();s.width=i.width,s.height=i.height}function J(s){var i=document.createElement("canvas");return i.style.position="fixed",i.style.top="0px",i.style.left="0px",i.style.pointerEvents="none",i.style.zIndex=s,i}function R(s,i,v,m,T,k,E,y,I){s.save(),s.translate(i,v),s.rotate(k),s.scale(m,T),s.arc(0,0,1,E,y,I),s.restore()}function ee(s){var i=s.angle*(Math.PI/180),v=s.spread*(Math.PI/180);return{x:s.x,y:s.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:s.startVelocity*.5+Math.random()*s.startVelocity,angle2D:-i+(.5*v-Math.random()*v),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:s.color,shape:s.shape,tick:0,totalTicks:s.ticks,decay:s.decay,drift:s.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:s.gravity*3,ovalScalar:.6,scalar:s.scalar,flat:s.flat}}function se(s,i){i.x+=Math.cos(i.angle2D)*i.velocity+i.drift,i.y+=Math.sin(i.angle2D)*i.velocity+i.gravity,i.velocity*=i.decay,i.flat?(i.wobble=0,i.wobbleX=i.x+10*i.scalar,i.wobbleY=i.y+10*i.scalar,i.tiltSin=0,i.tiltCos=0,i.random=1):(i.wobble+=i.wobbleSpeed,i.wobbleX=i.x+10*i.scalar*Math.cos(i.wobble),i.wobbleY=i.y+10*i.scalar*Math.sin(i.wobble),i.tiltAngle+=.1,i.tiltSin=Math.sin(i.tiltAngle),i.tiltCos=Math.cos(i.tiltAngle),i.random=Math.random()+2);var v=i.tick++/i.totalTicks,m=i.x+i.random*i.tiltCos,T=i.y+i.random*i.tiltSin,k=i.wobbleX+i.random*i.tiltCos,E=i.wobbleY+i.random*i.tiltSin;if(s.fillStyle="rgba("+i.color.r+", "+i.color.g+", "+i.color.b+", "+(1-v)+")",s.beginPath(),c&&i.shape.type==="path"&&typeof i.shape.path=="string"&&Array.isArray(i.shape.matrix))s.fill(te(i.shape.path,i.shape.matrix,i.x,i.y,Math.abs(k-m)*.1,Math.abs(E-T)*.1,Math.PI/10*i.wobble));else if(i.shape.type==="bitmap"){var y=Math.PI/10*i.wobble,I=Math.abs(k-m)*.1,O=Math.abs(E-T)*.1,D=i.shape.bitmap.width*i.scalar,L=i.shape.bitmap.height*i.scalar,N=new DOMMatrix([Math.cos(y)*I,Math.sin(y)*I,-Math.sin(y)*O,Math.cos(y)*O,i.x,i.y]);N.multiplySelf(new DOMMatrix(i.shape.matrix));var q=s.createPattern(h.transform(i.shape.bitmap),"no-repeat");q.setTransform(N),s.globalAlpha=1-v,s.fillStyle=q,s.fillRect(i.x-D/2,i.y-L/2,D,L),s.globalAlpha=1}else if(i.shape==="circle")s.ellipse?s.ellipse(i.x,i.y,Math.abs(k-m)*i.ovalScalar,Math.abs(E-T)*i.ovalScalar,Math.PI/10*i.wobble,0,2*Math.PI):R(s,i.x,i.y,Math.abs(k-m)*i.ovalScalar,Math.abs(E-T)*i.ovalScalar,Math.PI/10*i.wobble,0,2*Math.PI);else if(i.shape==="star")for(var C=Math.PI/2*3,V=4*i.scalar,z=8*i.scalar,U=i.x,Q=i.y,oe=5,G=Math.PI/oe;oe--;)U=i.x+Math.cos(C)*z,Q=i.y+Math.sin(C)*z,s.lineTo(U,Q),C+=G,U=i.x+Math.cos(C)*V,Q=i.y+Math.sin(C)*V,s.lineTo(U,Q),C+=G;else s.moveTo(Math.floor(i.x),Math.floor(i.y)),s.lineTo(Math.floor(i.wobbleX),Math.floor(T)),s.lineTo(Math.floor(k),Math.floor(E)),s.lineTo(Math.floor(m),Math.floor(i.wobbleY));return s.closePath(),s.fill(),i.tick<i.totalTicks}function j(s,i,v,m,T){var k=i.slice(),E=s.getContext("2d"),y,I,O=S(function(D){function L(){y=I=null,E.clearRect(0,0,m.width,m.height),h.clear(),T(),D()}function N(){n&&!(m.width===a.width&&m.height===a.height)&&(m.width=s.width=a.width,m.height=s.height=a.height),!m.width&&!m.height&&(v(s),m.width=s.width,m.height=s.height),E.clearRect(0,0,m.width,m.height),k=k.filter(function(q){return se(E,q)}),k.length?y=f.frame(N):L()}y=f.frame(N),I=L});return{addFettis:function(D){return k=k.concat(D),O},canvas:s,promise:O,reset:function(){y&&f.cancel(y),I&&I()}}}function le(s,i){var v=!s,m=!!M(i||{},"resize"),T=!1,k=M(i,"disableForReducedMotion",Boolean),E=l&&!!M(i||{},"useWorker"),y=E?x():null,I=v?_:re,O=s&&y?!!s.__confetti_initialized:!1,D=typeof matchMedia=="function"&&matchMedia("(prefers-reduced-motion)").matches,L;function N(C,V,z){for(var U=M(C,"particleCount",F),Q=M(C,"angle",Number),oe=M(C,"spread",Number),G=M(C,"startVelocity",Number),at=M(C,"decay",Number),it=M(C,"gravity",Number),ot=M(C,"drift",Number),Ce=M(C,"colors",H),st=M(C,"ticks",Number),Oe=M(C,"shapes"),lt=M(C,"scalar"),ct=!!M(C,"flat"),Le=B(C),Be=U,me=[],ut=s.width*Le.x,dt=s.height*Le.y;Be--;)me.push(ee({x:ut,y:dt,angle:Q,spread:oe,startVelocity:G,color:Ce[Be%Ce.length],shape:Oe[w(0,Oe.length)],ticks:st,decay:at,gravity:it,drift:ot,scalar:lt,flat:ct}));return L?L.addFettis(me):(L=j(s,me,I,V,z),L.promise)}function q(C){var V=k||M(C,"disableForReducedMotion",Boolean),z=M(C,"zIndex",Number);if(V&&D)return S(function(G){G()});v&&L?s=L.canvas:v&&!s&&(s=J(z),document.body.appendChild(s)),m&&!O&&I(s);var U={width:s.width,height:s.height};y&&!O&&y.init(s),O=!0,y&&(s.__confetti_initialized=!0);function Q(){if(y){var G={getBoundingClientRect:function(){if(!v)return s.getBoundingClientRect()}};I(G),y.postMessage({resize:{width:G.width,height:G.height}});return}U.width=U.height=null}function oe(){L=null,m&&(T=!1,e.removeEventListener("resize",Q)),v&&s&&(document.body.contains(s)&&document.body.removeChild(s),s=null,O=!1)}return m&&!T&&(T=!0,e.addEventListener("resize",Q,!1)),y?y.fire(C,U,oe):N(C,U,oe)}return q.reset=function(){y&&y.reset(),L&&L.reset()},q}var ne;function de(){return ne||(ne=le(null,{useWorker:!0,resize:!0})),ne}function te(s,i,v,m,T,k,E){var y=new Path2D(s),I=new Path2D;I.addPath(y,new DOMMatrix(i));var O=new Path2D;return O.addPath(I,new DOMMatrix([Math.cos(E)*T,Math.sin(E)*T,-Math.sin(E)*k,Math.cos(E)*k,v,m])),O}function ae(s){if(!c)throw new Error("path confetti are not supported in this browser");var i,v;typeof s=="string"?i=s:(i=s.path,v=s.matrix);var m=new Path2D(i),T=document.createElement("canvas"),k=T.getContext("2d");if(!v){for(var E=1e3,y=E,I=E,O=0,D=0,L,N,q=0;q<E;q+=2)for(var C=0;C<E;C+=2)k.isPointInPath(m,q,C,"nonzero")&&(y=Math.min(y,q),I=Math.min(I,C),O=Math.max(O,q),D=Math.max(D,C));L=O-y,N=D-I;var V=10,z=Math.min(V/L,V/N);v=[z,0,0,z,-Math.round(L/2+y)*z,-Math.round(N/2+I)*z]}return{type:"path",path:i,matrix:v}}function ie(s){var i,v=1,m="#000000",T='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';typeof s=="string"?i=s:(i=s.text,v="scalar"in s?s.scalar:v,T="fontFamily"in s?s.fontFamily:T,m="color"in s?s.color:m);var k=10*v,E=""+k+"px "+T,y=new OffscreenCanvas(k,k),I=y.getContext("2d");I.font=E;var O=I.measureText(i),D=Math.ceil(O.actualBoundingBoxRight+O.actualBoundingBoxLeft),L=Math.ceil(O.actualBoundingBoxAscent+O.actualBoundingBoxDescent),N=2,q=O.actualBoundingBoxLeft+N,C=O.actualBoundingBoxAscent+N;D+=N+N,L+=N+N,y=new OffscreenCanvas(D,L),I=y.getContext("2d"),I.font=E,I.fillStyle=m,I.fillText(i,q,C);var V=1/v;return{type:"bitmap",bitmap:y.transferToImageBitmap(),matrix:[V,0,0,V,-D*V/2,-L*V/2]}}r.exports=function(){return de().apply(this,arguments)},r.exports.reset=function(){de().reset()},r.exports.create=le,r.exports.shapeFromPath=ae,r.exports.shapeFromText=ie})(function(){return typeof window<"u"?window:typeof self<"u"?self:this||{}}(),ue,!1);const Kt=ue.exports;ue.exports.create;class Zt{burst(){if(window.matchMedia("(prefers-reduced-motion: reduce)").matches)return;const e=200,r={origin:{y:.5},zIndex:1e3};function n(a,l){Kt({...r,...l,particleCount:Math.floor(e*a)})}n(.25,{spread:26,startVelocity:55}),n(.2,{spread:60}),n(.35,{spread:100,decay:.91,scalar:.8}),n(.1,{spread:120,startVelocity:25,decay:.92,scalar:1.2}),n(.1,{spread:120,startVelocity:45})}}class _t{constructor(e,r){A(this,"state",{step:"loading",tapsRemaining:1,animationProgress:0});A(this,"animation",null);this.container=e,this.giftService=r}async initialize(e){try{const r=await this.giftService.getGift(e);if(r.isActivated){this.showAlreadyActivated(r);return}await this.renderGiftBox(r),r.isOpened||await this.giftService.markAsOpened(e),this.setupInteractions(r)}catch(r){this.showError(r.message)}}async renderGiftBox(e){this.container.innerHTML=`
      <div class="gift-reveal-container">
        <div class="gift-header">
          <p class="sender-text">Fra ${e.senderName}</p>
        </div>

        <div class="gift-box-wrapper">
          <div id="animation-container"></div>
          <div class="tap-indicator visible">
            <span class="tap-count">${this.state.tapsRemaining}</span>
            <span class="tap-text">trykk for √• √•pne</span>
          </div>
        </div>

        <div class="gift-content hidden" id="gift-content">
          <div class="gift-card">
            <div class="vendor-info">
              <div class="vendor-logo">
                <div class="placeholder-logo">${e.vendorName.charAt(0)}</div>
              </div>
              <h2 class="vendor-name">${e.vendorName}</h2>
            </div>
            <h1 class="gift-amount">${e.amount} kr</h1>
            ${e.personalMessage?`
              <div class="message-card">
                <p>${e.personalMessage}</p>
                <span class="sender">- ${e.senderName}</span>
              </div>
            `:""}
            <button class="cta-button" id="transfer-button">
              Hent gavekortet üéÅ
            </button>
          </div>
        </div>
      </div>
    `,this.animation=Gt.create(e.animationType),console.log(`Using ${e.animationType} animation theme`),await this.animation.load(document.getElementById("animation-container")),this.animation.playIdle(),this.state.step="ready"}setupInteractions(e){var n;const r=document.querySelector(".gift-box-wrapper");r==null||r.addEventListener("click",async()=>{this.state.tapsRemaining>0&&await this.handleTap()}),(n=document.getElementById("transfer-button"))==null||n.addEventListener("click",()=>{this.handleTransfer(e)})}async handleTap(){this.state.tapsRemaining--,this.animation&&this.state.tapsRemaining===0&&(this.state.step="revealed",this.triggerSynchronizedReveal())}async triggerSynchronizedReveal(){if(!this.animation)return;const e=document.querySelector(".tap-indicator");e&&e.classList.remove("visible");const r=this.animation.playReveal();setTimeout(()=>{new Zt().burst()},900),setTimeout(()=>{this.showGiftContent()},1300),await r}showGiftContent(){const e=document.querySelector(".gift-header");e&&(e.style.transition="opacity 0.3s ease",e.style.opacity="0",setTimeout(()=>{e.style.display="none"},300));const r=document.querySelector(".gift-box-wrapper");r&&(r.style.transition="opacity 0.4s ease",r.style.opacity="0",setTimeout(()=>{r.style.display="none"},400));const n=document.getElementById("gift-content");n&&(n.classList.remove("hidden"),n.style.opacity="0",n.style.transition="opacity 0.6s ease",requestAnimationFrame(()=>{requestAnimationFrame(()=>{n.style.opacity="1"})})),this.state.step="revealed"}handleTransfer(e){this.giftService.getTransferLink(e.code),alert("I en ekte implementasjon ville dette √•pnet Mine Gavekort-appen"),this.state.step="transferred",this.showTransferred(e)}showAlreadyActivated(e){this.container.innerHTML=`
      <div class="status-container already-activated">
        <div class="status-icon">‚úÖ</div>
        <h1>Gavekortet er allerede hentet</h1>
        <p>Dette gavekortet p√• <strong>${e.amount} kr</strong> til <strong>${e.vendorName}</strong>
           er allerede lagt til i Mine Gavekort-appen.</p>
        <button class="cta-button" onclick="alert('Ville √•pnet Mine Gavekort-appen')">
          √Öpne Mine Gavekort
        </button>
      </div>
    `}showTransferred(e){this.container.innerHTML=`
      <div class="status-container transferred">
        <div class="status-icon">üéâ</div>
        <h1>Gratulerer!</h1>
        <p>Gavekortet ditt p√• <strong>${e.amount} kr</strong> til <strong>${e.vendorName}</strong>
           er n√• klart til bruk!</p>
        <button class="cta-button" onclick="window.location.reload()">
          Test p√• nytt
        </button>
      </div>
    `}showError(e){this.container.innerHTML=`
      <div class="status-container error-state">
        <div class="status-icon">üòï</div>
        <h1>Noe gikk galt</h1>
        <p>${e}</p>
        <button class="cta-button" onclick="window.location.reload()">
          Pr√∏v igjen
        </button>
      </div>
    `}}const Qt={id:"550e8400-e29b-41d4-a716-446655440000",vendorName:"H&M",vendorLogoUrl:"/images/vendors/placeholder-logo.svg",amount:500,currency:"NOK",personalMessage:"Gratulerer med dagen! H√•per du finner noe fint üéâ",senderName:"Kari Nordmann",animationType:"birthday",expiryDate:"2025-12-31",isOpened:!1,isActivated:!1},Xt={id:"550e8400-e29b-41d4-a716-446655440001",vendorName:"Zalando",vendorLogoUrl:"/images/vendors/placeholder-logo.svg",amount:1e3,currency:"NOK",senderName:"Per Hansen",animationType:"generic",isOpened:!0,isActivated:!0},Jt={id:"550e8400-e29b-41d4-a716-446655440002",vendorName:"Kitchn",vendorLogoUrl:"/images/vendors/placeholder-logo.svg",amount:2500,currency:"NOK",personalMessage:"Gratulerer med bryllupet! ‚ù§Ô∏è",senderName:"Familie Olsen",animationType:"wedding",isOpened:!1,isActivated:!1},er={id:"550e8400-e29b-41d4-a716-446655440003",vendorName:"Europris",vendorLogoUrl:"/images/vendors/placeholder-logo.svg",amount:800,currency:"NOK",personalMessage:"Til verdens beste pappa! üëî",senderName:"Barna",animationType:"fathersday",isOpened:!1,isActivated:!1},tr={id:"550e8400-e29b-41d4-a716-446655440004",vendorName:"Lekebutikken",vendorLogoUrl:"/images/vendors/placeholder-logo.svg",amount:350,currency:"NOK",personalMessage:"Gratulerer med dagen! üéà",senderName:"Bestemor",animationType:"balloon",isOpened:!1,isActivated:!1},rr={error:"Dette gavekortet finnes ikke"},nr={error:"Dette gavekortet har utl√∏pt"},qe={TEST1234:Qt,TESTUSED:Xt,TESTBRYL:Jt,TESTFAR:er,TESTBAL:tr,TESTERR1:rr,TESTEXP1:nr,default:{id:"550e8400-e29b-41d4-a716-446655440099",vendorName:"XXL",vendorLogoUrl:"/images/vendors/placeholder-logo.svg",amount:750,currency:"NOK",personalMessage:"Til deg!",senderName:"En venn",animationType:"generic",isOpened:!1,isActivated:!1}};class ar{delay(e){return new Promise(r=>setTimeout(r,e))}async getGift(e){await this.delay(800);const r=qe[e]||qe.default;if(r.error)throw new Error(r.error);return{...r,code:e,expiryDate:r.expiryDate?new Date(r.expiryDate):void 0}}async markAsOpened(e){await this.delay(300),console.log(`[Mock] Gift ${e} marked as opened`)}getTransferLink(e){return{success:!0,appDeepLink:`#transferred-${e}`,fallbackUrl:"https://apps.apple.com/no/app/mine-gavekort/id123456"}}}function ir(t=!0){return new ar}const or={USE_MOCKS:!0};class sr{constructor(){A(this,"router");A(this,"container");this.container=document.getElementById("app"),this.router=new gt,this.initializeRoutes()}initializeRoutes(){this.router.register(/^\/g\/([a-zA-Z0-9]{4,12})$/,async e=>{const r=e[1];await new _t(this.container,ir(or.USE_MOCKS)).initialize(r)}),this.router.register(/^\/?$/,()=>{this.showHomepage()}),this.router.register(/^.*$/,()=>{this.showError("Ugyldig gave-link")})}showHomepage(){this.container.innerHTML=`
      <div class="homepage">
        <h1>üéÅ Gift Reveal PoC</h1>
        <p>Interaktiv gavekort√•pning med <strong>Anime.js</strong> animasjoner</p>

        <div class="engine-section" style="background: linear-gradient(135deg, #fff5f7 0%, #ffe8ec 100%); border: 2px solid #ff1744;">
          <h2>‚ú® Test Gift Reveal (1 trykk)</h2>
          <div class="test-links">
            <a href="/g/TEST1234" class="test-link anime" style="font-size: 18px; padding: 20px 24px;">
              <span class="link-label">üéÇ Bursdagsgave</span>
              <span class="link-code">TEST1234</span>
            </a>
            <a href="/g/TESTFAR" class="test-link anime">
              <span class="link-label">üëî Farsdag</span>
              <span class="link-code">TESTFAR</span>
            </a>
            <a href="/g/TESTBRYL" class="test-link anime">
              <span class="link-label">üíç Bryllupsgave (Ring)</span>
              <span class="link-code">TESTBRYL</span>
            </a>
            <a href="/g/TESTBAL" class="test-link anime">
              <span class="link-label">üéà Ballong (Sprekker!)</span>
              <span class="link-code">TESTBAL</span>
            </a>
          </div>
          <p style="margin-top: 16px; font-size: 14px; color: #666;">
            <strong>Hver animasjon er unik!</strong> Bursdagsgave har gaveboks, Farsdag har maskulin boks, Bryllup har ringboks med diamant, Ballong sprekker! ‚ú®
          </p>
        </div>

        <div class="engine-section">
          <h3>‚ö†Ô∏è Test error states:</h3>
          <div class="test-links">
            <a href="/g/TESTUSED" class="test-link">
              <span class="link-label">‚úÖ Allerede aktivert</span>
              <span class="link-code">TESTUSED</span>
            </a>
            <a href="/g/TESTERR1" class="test-link">
              <span class="link-label">‚ùå Feil - finnes ikke</span>
              <span class="link-code">TESTERR1</span>
            </a>
          </div>
        </div>

        <div class="engine-section" style="background: #f9f9f9;">
          <h3>üì¶ Teknisk info</h3>
          <ul style="text-align: left; font-size: 14px; color: #666; line-height: 1.8;">
            <li><strong>Framework:</strong> Vite + TypeScript</li>
            <li><strong>Animasjoner:</strong> Anime.js (~8 KB)</li>
            <li><strong>Konfetti:</strong> Canvas Confetti</li>
            <li><strong>Mobile-first:</strong> Optimalisert for iOS Safari/Chrome</li>
          </ul>
        </div>
      </div>
    `}showError(e){this.container.innerHTML=`
      <div class="status-container error-state">
        <div class="status-icon">üòï</div>
        <h1>Oops!</h1>
        <p>${e}</p>
        <a href="/" class="cta-button">Tilbake til forsiden</a>
      </div>
    `}start(){const e=window.location.pathname;this.router.navigate(e),window.addEventListener("popstate",()=>{const r=window.location.pathname;this.router.navigate(r)}),document.addEventListener("click",r=>{const n=r.target.closest("a");if(n&&n.hostname===window.location.hostname){r.preventDefault();const a=n.pathname+n.search;window.history.pushState({},"",a),this.router.navigate(n.pathname)}})}}const lr=new sr;lr.start()});export default cr();
