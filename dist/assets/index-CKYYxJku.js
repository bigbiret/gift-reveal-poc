var dr=Object.defineProperty;var fr=(r,e,t)=>e in r?dr(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var hr=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports);var z=(r,e,t)=>fr(r,typeof e!="symbol"?e+"":e,t);var nt=hr((it,ue)=>{(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const l of n)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&a(c)}).observe(document,{childList:!0,subtree:!0});function t(n){const l={};return n.integrity&&(l.integrity=n.integrity),n.referrerPolicy&&(l.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?l.credentials="include":n.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function a(n){if(n.ep)return;n.ep=!0;const l=t(n);fetch(n.href,l)}})();class vr{constructor(){z(this,"routes",[]);z(this,"basePath");this.basePath="/gift-reveal-poc/",this.basePath!=="/"&&this.basePath.endsWith("/")&&(this.basePath=this.basePath.slice(0,-1))}register(e,t){this.routes.push({pattern:e,handler:t})}async navigate(e){let t=e;this.basePath!=="/"&&e.startsWith(this.basePath)&&(t=e.slice(this.basePath.length)),t.startsWith("/")||(t=`/${t}`);for(const a of this.routes){const n=t.match(a.pattern);if(n){await a.handler(n);return}}console.warn(`No route found for path: ${e}`)}getCurrentPath(){let e=window.location.pathname;return this.basePath!=="/"&&e.startsWith(this.basePath)&&(e=e.slice(this.basePath.length)),e||"/"}}var ze={update:null,begin:null,loopBegin:null,changeBegin:null,change:null,changeComplete:null,loopComplete:null,complete:null,loop:1,direction:"normal",autoplay:!0,timelineOffset:0},we={duration:1e3,delay:0,endDelay:0,easing:"easeOutElastic(1, .5)",round:0},gr=["translateX","translateY","translateZ","rotate","rotateX","rotateY","rotateZ","scale","scaleX","scaleY","scaleZ","skew","skewX","skewY","perspective","matrix","matrix3d"],fe={CSS:{},springs:{}};function Z(r,e,t){return Math.min(Math.max(r,e),t)}function ce(r,e){return r.indexOf(e)>-1}function me(r,e){return r.apply(null,e)}var v={arr:function(r){return Array.isArray(r)},obj:function(r){return ce(Object.prototype.toString.call(r),"Object")},pth:function(r){return v.obj(r)&&r.hasOwnProperty("totalLength")},svg:function(r){return r instanceof SVGElement},inp:function(r){return r instanceof HTMLInputElement},dom:function(r){return r.nodeType||v.svg(r)},str:function(r){return typeof r=="string"},fnc:function(r){return typeof r=="function"},und:function(r){return typeof r>"u"},nil:function(r){return v.und(r)||r===null},hex:function(r){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(r)},rgb:function(r){return/^rgb/.test(r)},hsl:function(r){return/^hsl/.test(r)},col:function(r){return v.hex(r)||v.rgb(r)||v.hsl(r)},key:function(r){return!ze.hasOwnProperty(r)&&!we.hasOwnProperty(r)&&r!=="targets"&&r!=="keyframes"}};function $e(r){var e=/\(([^)]+)\)/.exec(r);return e?e[1].split(",").map(function(t){return parseFloat(t)}):[]}function Ue(r,e){var t=$e(r),a=Z(v.und(t[0])?1:t[0],.1,100),n=Z(v.und(t[1])?100:t[1],.1,100),l=Z(v.und(t[2])?10:t[2],.1,100),c=Z(v.und(t[3])?0:t[3],.1,100),u=Math.sqrt(n/a),o=l/(2*Math.sqrt(n*a)),x=o<1?u*Math.sqrt(1-o*o):0,d=1,f=o<1?(o*u+-c)/x:-c+u;function k(E){var y=e?e*E/1e3:E;return o<1?y=Math.exp(-y*o*u)*(d*Math.cos(x*y)+f*Math.sin(x*y)):y=(d+f*y)*Math.exp(-y*u),E===0||E===1?E:1-y}function N(){var E=fe.springs[r];if(E)return E;for(var y=1/6,w=0,L=0;;)if(w+=y,k(w)===1){if(L++,L>=16)break}else L=0;var b=w*y*1e3;return fe.springs[r]=b,b}return e?k:N}function pr(r){return r===void 0&&(r=10),function(e){return Math.ceil(Z(e,1e-6,1)*r)*(1/r)}}var mr=function(){var r=11,e=1/(r-1);function t(d,f){return 1-3*f+3*d}function a(d,f){return 3*f-6*d}function n(d){return 3*d}function l(d,f,k){return((t(f,k)*d+a(f,k))*d+n(f))*d}function c(d,f,k){return 3*t(f,k)*d*d+2*a(f,k)*d+n(f)}function u(d,f,k,N,E){var y,w,L=0;do w=f+(k-f)/2,y=l(w,N,E)-d,y>0?k=w:f=w;while(Math.abs(y)>1e-7&&++L<10);return w}function o(d,f,k,N){for(var E=0;E<4;++E){var y=c(f,k,N);if(y===0)return f;var w=l(f,k,N)-d;f-=w/y}return f}function x(d,f,k,N){if(!(0<=d&&d<=1&&0<=k&&k<=1))return;var E=new Float32Array(r);if(d!==f||k!==N)for(var y=0;y<r;++y)E[y]=l(y*e,d,k);function w(L){for(var b=0,p=1,j=r-1;p!==j&&E[p]<=L;++p)b+=e;--p;var G=(L-E[p])/(E[p+1]-E[p]),A=b+G*e,Y=c(A,d,k);return Y>=.001?o(L,A,d,k):Y===0?A:u(L,b,b+e,d,k)}return function(L){return d===f&&k===N||L===0||L===1?L:l(w(L),f,N)}}return x}(),He=function(){var r={linear:function(){return function(a){return a}}},e={Sine:function(){return function(a){return 1-Math.cos(a*Math.PI/2)}},Expo:function(){return function(a){return a?Math.pow(2,10*a-10):0}},Circ:function(){return function(a){return 1-Math.sqrt(1-a*a)}},Back:function(){return function(a){return a*a*(3*a-2)}},Bounce:function(){return function(a){for(var n,l=4;a<((n=Math.pow(2,--l))-1)/11;);return 1/Math.pow(4,3-l)-7.5625*Math.pow((n*3-2)/22-a,2)}},Elastic:function(a,n){a===void 0&&(a=1),n===void 0&&(n=.5);var l=Z(a,1,10),c=Z(n,.1,2);return function(u){return u===0||u===1?u:-l*Math.pow(2,10*(u-1))*Math.sin((u-1-c/(Math.PI*2)*Math.asin(1/l))*(Math.PI*2)/c)}}},t=["Quad","Cubic","Quart","Quint"];return t.forEach(function(a,n){e[a]=function(){return function(l){return Math.pow(l,n+2)}}}),Object.keys(e).forEach(function(a){var n=e[a];r["easeIn"+a]=n,r["easeOut"+a]=function(l,c){return function(u){return 1-n(l,c)(1-u)}},r["easeInOut"+a]=function(l,c){return function(u){return u<.5?n(l,c)(u*2)/2:1-n(l,c)(u*-2+2)/2}},r["easeOutIn"+a]=function(l,c){return function(u){return u<.5?(1-n(l,c)(1-u*2))/2:(n(l,c)(u*2-1)+1)/2}}}),r}();function Me(r,e){if(v.fnc(r))return r;var t=r.split("(")[0],a=He[t],n=$e(r);switch(t){case"spring":return Ue(r,e);case"cubicBezier":return me(mr,n);case"steps":return me(pr,n);default:return me(a,n)}}function qe(r){try{var e=document.querySelectorAll(r);return e}catch{return}}function he(r,e){for(var t=r.length,a=arguments.length>=2?arguments[1]:void 0,n=[],l=0;l<t;l++)if(l in r){var c=r[l];e.call(a,c,l,r)&&n.push(c)}return n}function ve(r){return r.reduce(function(e,t){return e.concat(v.arr(t)?ve(t):t)},[])}function Be(r){return v.arr(r)?r:(v.str(r)&&(r=qe(r)||r),r instanceof NodeList||r instanceof HTMLCollection?[].slice.call(r):[r])}function Te(r,e){return r.some(function(t){return t===e})}function ke(r){var e={};for(var t in r)e[t]=r[t];return e}function ye(r,e){var t=ke(r);for(var a in r)t[a]=e.hasOwnProperty(a)?e[a]:r[a];return t}function ge(r,e){var t=ke(r);for(var a in e)t[a]=v.und(r[a])?e[a]:r[a];return t}function yr(r){var e=/rgb\((\d+,\s*[\d]+,\s*[\d]+)\)/g.exec(r);return e?"rgba("+e[1]+",1)":r}function br(r){var e=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,t=r.replace(e,function(u,o,x,d){return o+o+x+x+d+d}),a=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t),n=parseInt(a[1],16),l=parseInt(a[2],16),c=parseInt(a[3],16);return"rgba("+n+","+l+","+c+",1)"}function wr(r){var e=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(r)||/hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*([\d.]+)\)/g.exec(r),t=parseInt(e[1],10)/360,a=parseInt(e[2],10)/100,n=parseInt(e[3],10)/100,l=e[4]||1;function c(k,N,E){return E<0&&(E+=1),E>1&&(E-=1),E<1/6?k+(N-k)*6*E:E<1/2?N:E<2/3?k+(N-k)*(2/3-E)*6:k}var u,o,x;if(a==0)u=o=x=n;else{var d=n<.5?n*(1+a):n+a-n*a,f=2*n-d;u=c(f,d,t+1/3),o=c(f,d,t),x=c(f,d,t-1/3)}return"rgba("+u*255+","+o*255+","+x*255+","+l+")"}function Mr(r){if(v.rgb(r))return yr(r);if(v.hex(r))return br(r);if(v.hsl(r))return wr(r)}function J(r){var e=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/.exec(r);if(e)return e[1]}function Tr(r){if(ce(r,"translate")||r==="perspective")return"px";if(ce(r,"rotate")||ce(r,"skew"))return"deg"}function be(r,e){return v.fnc(r)?r(e.target,e.id,e.total):r}function _(r,e){return r.getAttribute(e)}function xe(r,e,t){var a=J(e);if(Te([t,"deg","rad","turn"],a))return e;var n=fe.CSS[e+t];if(!v.und(n))return n;var l=100,c=document.createElement(r.tagName),u=r.parentNode&&r.parentNode!==document?r.parentNode:document.body;u.appendChild(c),c.style.position="absolute",c.style.width=l+t;var o=l/c.offsetWidth;u.removeChild(c);var x=o*parseFloat(e);return fe.CSS[e+t]=x,x}function We(r,e,t){if(e in r.style){var a=e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),n=r.style[e]||getComputedStyle(r).getPropertyValue(a)||"0";return t?xe(r,n,t):n}}function Ee(r,e){if(v.dom(r)&&!v.inp(r)&&(!v.nil(_(r,e))||v.svg(r)&&r[e]))return"attribute";if(v.dom(r)&&Te(gr,e))return"transform";if(v.dom(r)&&e!=="transform"&&We(r,e))return"css";if(r[e]!=null)return"object"}function Ge(r){if(v.dom(r)){for(var e=r.style.transform||"",t=/(\w+)\(([^)]*)\)/g,a=new Map,n;n=t.exec(e);)a.set(n[1],n[2]);return a}}function kr(r,e,t,a){var n=ce(e,"scale")?1:0+Tr(e),l=Ge(r).get(e)||n;return t&&(t.transforms.list.set(e,l),t.transforms.last=e),a?xe(r,l,a):l}function Pe(r,e,t,a){switch(Ee(r,e)){case"transform":return kr(r,e,a,t);case"css":return We(r,e,t);case"attribute":return _(r,e);default:return r[e]||0}}function Ce(r,e){var t=/^(\*=|\+=|-=)/.exec(r);if(!t)return r;var a=J(r)||0,n=parseFloat(e),l=parseFloat(r.replace(t[0],""));switch(t[0][0]){case"+":return n+l+a;case"-":return n-l+a;case"*":return n*l+a}}function Ke(r,e){if(v.col(r))return Mr(r);if(/\s/g.test(r))return r;var t=J(r),a=t?r.substr(0,r.length-t.length):r;return e?a+e:a}function Se(r,e){return Math.sqrt(Math.pow(e.x-r.x,2)+Math.pow(e.y-r.y,2))}function xr(r){return Math.PI*2*_(r,"r")}function Er(r){return _(r,"width")*2+_(r,"height")*2}function Pr(r){return Se({x:_(r,"x1"),y:_(r,"y1")},{x:_(r,"x2"),y:_(r,"y2")})}function Ze(r){for(var e=r.points,t=0,a,n=0;n<e.numberOfItems;n++){var l=e.getItem(n);n>0&&(t+=Se(a,l)),a=l}return t}function Cr(r){var e=r.points;return Ze(r)+Se(e.getItem(e.numberOfItems-1),e.getItem(0))}function _e(r){if(r.getTotalLength)return r.getTotalLength();switch(r.tagName.toLowerCase()){case"circle":return xr(r);case"rect":return Er(r);case"line":return Pr(r);case"polyline":return Ze(r);case"polygon":return Cr(r)}}function Sr(r){var e=_e(r);return r.setAttribute("stroke-dasharray",e),e}function Ir(r){for(var e=r.parentNode;v.svg(e)&&v.svg(e.parentNode);)e=e.parentNode;return e}function Ye(r,e){var t=e||{},a=t.el||Ir(r),n=a.getBoundingClientRect(),l=_(a,"viewBox"),c=n.width,u=n.height,o=t.viewBox||(l?l.split(" "):[0,0,c,u]);return{el:a,viewBox:o,x:o[0]/1,y:o[1]/1,w:c,h:u,vW:o[2],vH:o[3]}}function Fr(r,e){var t=v.str(r)?qe(r)[0]:r,a=e||100;return function(n){return{property:n,el:t,svg:Ye(t),totalLength:_e(t)*(a/100)}}}function Or(r,e,t){function a(d){d===void 0&&(d=0);var f=e+d>=1?e+d:0;return r.el.getPointAtLength(f)}var n=Ye(r.el,r.svg),l=a(),c=a(-1),u=a(1),o=t?1:n.w/n.vW,x=t?1:n.h/n.vH;switch(r.property){case"x":return(l.x-n.x)*o;case"y":return(l.y-n.y)*x;case"angle":return Math.atan2(u.y-c.y,u.x-c.x)*180/Math.PI}}function Re(r,e){var t=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?/g,a=Ke(v.pth(r)?r.totalLength:r,e)+"";return{original:a,numbers:a.match(t)?a.match(t).map(Number):[0],strings:v.str(r)||e?a.split(t):[]}}function Ie(r){var e=r?ve(v.arr(r)?r.map(Be):Be(r)):[];return he(e,function(t,a,n){return n.indexOf(t)===a})}function Qe(r){var e=Ie(r);return e.map(function(t,a){return{target:t,id:a,total:e.length,transforms:{list:Ge(t)}}})}function Ar(r,e){var t=ke(e);if(/^spring/.test(t.easing)&&(t.duration=Ue(t.easing)),v.arr(r)){var a=r.length,n=a===2&&!v.obj(r[0]);n?r={value:r}:v.fnc(e.duration)||(t.duration=e.duration/a)}var l=v.arr(r)?r:[r];return l.map(function(c,u){var o=v.obj(c)&&!v.pth(c)?c:{value:c};return v.und(o.delay)&&(o.delay=u?0:e.delay),v.und(o.endDelay)&&(o.endDelay=u===l.length-1?e.endDelay:0),o}).map(function(c){return ge(c,t)})}function Lr(r){for(var e=he(ve(r.map(function(l){return Object.keys(l)})),function(l){return v.key(l)}).reduce(function(l,c){return l.indexOf(c)<0&&l.push(c),l},[]),t={},a=function(l){var c=e[l];t[c]=r.map(function(u){var o={};for(var x in u)v.key(x)?x==c&&(o.value=u[x]):o[x]=u[x];return o})},n=0;n<e.length;n++)a(n);return t}function Br(r,e){var t=[],a=e.keyframes;a&&(e=ge(Lr(a),e));for(var n in e)v.key(n)&&t.push({name:n,tweens:Ar(e[n],r)});return t}function Rr(r,e){var t={};for(var a in r){var n=be(r[a],e);v.arr(n)&&(n=n.map(function(l){return be(l,e)}),n.length===1&&(n=n[0])),t[a]=n}return t.duration=parseFloat(t.duration),t.delay=parseFloat(t.delay),t}function Dr(r,e){var t;return r.tweens.map(function(a){var n=Rr(a,e),l=n.value,c=v.arr(l)?l[1]:l,u=J(c),o=Pe(e.target,r.name,u,e),x=t?t.to.original:o,d=v.arr(l)?l[0]:x,f=J(d)||J(o),k=u||f;return v.und(c)&&(c=x),n.from=Re(d,k),n.to=Re(Ce(c,d),k),n.start=t?t.end:0,n.end=n.start+n.delay+n.duration+n.endDelay,n.easing=Me(n.easing,n.duration),n.isPath=v.pth(l),n.isPathTargetInsideSVG=n.isPath&&v.svg(e.target),n.isColor=v.col(n.from.original),n.isColor&&(n.round=1),t=n,n})}var Je={css:function(r,e,t){return r.style[e]=t},attribute:function(r,e,t){return r.setAttribute(e,t)},object:function(r,e,t){return r[e]=t},transform:function(r,e,t,a,n){if(a.list.set(e,t),e===a.last||n){var l="";a.list.forEach(function(c,u){l+=u+"("+c+") "}),r.style.transform=l}}};function Xe(r,e){var t=Qe(r);t.forEach(function(a){for(var n in e){var l=be(e[n],a),c=a.target,u=J(l),o=Pe(c,n,u,a),x=u||J(o),d=Ce(Ke(l,x),o),f=Ee(c,n);Je[f](c,n,d,a.transforms,!0)}})}function Nr(r,e){var t=Ee(r.target,e.name);if(t){var a=Dr(e,r),n=a[a.length-1];return{type:t,property:e.name,animatable:r,tweens:a,duration:n.end,delay:a[0].delay,endDelay:n.endDelay}}}function jr(r,e){return he(ve(r.map(function(t){return e.map(function(a){return Nr(t,a)})})),function(t){return!v.und(t)})}function er(r,e){var t=r.length,a=function(l){return l.timelineOffset?l.timelineOffset:0},n={};return n.duration=t?Math.max.apply(Math,r.map(function(l){return a(l)+l.duration})):e.duration,n.delay=t?Math.min.apply(Math,r.map(function(l){return a(l)+l.delay})):e.delay,n.endDelay=t?n.duration-Math.max.apply(Math,r.map(function(l){return a(l)+l.duration-l.endDelay})):e.endDelay,n}var De=0;function Vr(r){var e=ye(ze,r),t=ye(we,r),a=Br(t,r),n=Qe(r.targets),l=jr(n,a),c=er(l,t),u=De;return De++,ge(e,{id:u,children:[],animatables:n,animations:l,duration:c.duration,delay:c.delay,endDelay:c.endDelay})}var W=[],rr=function(){var r;function e(){!r&&(!Ne()||!S.suspendWhenDocumentHidden)&&W.length>0&&(r=requestAnimationFrame(t))}function t(n){for(var l=W.length,c=0;c<l;){var u=W[c];u.paused?(W.splice(c,1),l--):(u.tick(n),c++)}r=c>0?requestAnimationFrame(t):void 0}function a(){S.suspendWhenDocumentHidden&&(Ne()?r=cancelAnimationFrame(r):(W.forEach(function(n){return n._onDocumentVisibility()}),rr()))}return typeof document<"u"&&document.addEventListener("visibilitychange",a),e}();function Ne(){return!!document&&document.hidden}function S(r){r===void 0&&(r={});var e=0,t=0,a=0,n,l=0,c=null;function u(b){var p=window.Promise&&new Promise(function(j){return c=j});return b.finished=p,p}var o=Vr(r);u(o);function x(){var b=o.direction;b!=="alternate"&&(o.direction=b!=="normal"?"normal":"reverse"),o.reversed=!o.reversed,n.forEach(function(p){return p.reversed=o.reversed})}function d(b){return o.reversed?o.duration-b:b}function f(){e=0,t=d(o.currentTime)*(1/S.speed)}function k(b,p){p&&p.seek(b-p.timelineOffset)}function N(b){if(o.reversePlayback)for(var j=l;j--;)k(b,n[j]);else for(var p=0;p<l;p++)k(b,n[p])}function E(b){for(var p=0,j=o.animations,G=j.length;p<G;){var A=j[p],Y=A.animatable,te=A.tweens,X=te.length-1,B=te[X];X&&(B=he(te,function(P){return b<P.end})[0]||B);for(var ee=Z(b-B.start-B.delay,0,B.duration)/B.duration,se=isNaN(ee)?1:B.easing(ee),U=B.to.strings,le=B.round,ne=[],de=B.to.numbers.length,re=void 0,ae=0;ae<de;ae++){var ie=void 0,s=B.to.numbers[ae],i=B.from.numbers[ae]||0;B.isPath?ie=Or(B.value,se*s,B.isPathTargetInsideSVG):ie=i+se*(s-i),le&&(B.isColor&&ae>2||(ie=Math.round(ie*le)/le)),ne.push(ie)}var h=U.length;if(!h)re=ne[0];else{re=U[0];for(var g=0;g<h;g++){U[g];var M=U[g+1],T=ne[g];isNaN(T)||(M?re+=T+M:re+=T+" ")}}Je[A.type](Y.target,A.property,re,Y.transforms),A.currentValue=re,p++}}function y(b){o[b]&&!o.passThrough&&o[b](o)}function w(){o.remaining&&o.remaining!==!0&&o.remaining--}function L(b){var p=o.duration,j=o.delay,G=p-o.endDelay,A=d(b);o.progress=Z(A/p*100,0,100),o.reversePlayback=A<o.currentTime,n&&N(A),!o.began&&o.currentTime>0&&(o.began=!0,y("begin")),!o.loopBegan&&o.currentTime>0&&(o.loopBegan=!0,y("loopBegin")),A<=j&&o.currentTime!==0&&E(0),(A>=G&&o.currentTime!==p||!p)&&E(p),A>j&&A<G?(o.changeBegan||(o.changeBegan=!0,o.changeCompleted=!1,y("changeBegin")),y("change"),E(A)):o.changeBegan&&(o.changeCompleted=!0,o.changeBegan=!1,y("changeComplete")),o.currentTime=Z(A,0,p),o.began&&y("update"),b>=p&&(t=0,w(),o.remaining?(e=a,y("loopComplete"),o.loopBegan=!1,o.direction==="alternate"&&x()):(o.paused=!0,o.completed||(o.completed=!0,y("loopComplete"),y("complete"),!o.passThrough&&"Promise"in window&&(c(),u(o)))))}return o.reset=function(){var b=o.direction;o.passThrough=!1,o.currentTime=0,o.progress=0,o.paused=!0,o.began=!1,o.loopBegan=!1,o.changeBegan=!1,o.completed=!1,o.changeCompleted=!1,o.reversePlayback=!1,o.reversed=b==="reverse",o.remaining=o.loop,n=o.children,l=n.length;for(var p=l;p--;)o.children[p].reset();(o.reversed&&o.loop!==!0||b==="alternate"&&o.loop===1)&&o.remaining++,E(o.reversed?o.duration:0)},o._onDocumentVisibility=f,o.set=function(b,p){return Xe(b,p),o},o.tick=function(b){a=b,e||(e=a),L((a+(t-e))*S.speed)},o.seek=function(b){L(d(b))},o.pause=function(){o.paused=!0,f()},o.play=function(){o.paused&&(o.completed&&o.reset(),o.paused=!1,W.push(o),f(),rr())},o.reverse=function(){x(),o.completed=!o.reversed,f()},o.restart=function(){o.reset(),o.play()},o.remove=function(b){var p=Ie(b);tr(p,o)},o.reset(),o.autoplay&&o.play(),o}function je(r,e){for(var t=e.length;t--;)Te(r,e[t].animatable.target)&&e.splice(t,1)}function tr(r,e){var t=e.animations,a=e.children;je(r,t);for(var n=a.length;n--;){var l=a[n],c=l.animations;je(r,c),!c.length&&!l.children.length&&a.splice(n,1)}!t.length&&!a.length&&e.pause()}function zr(r){for(var e=Ie(r),t=W.length;t--;){var a=W[t];tr(e,a)}}function $r(r,e){e===void 0&&(e={});var t=e.direction||"normal",a=e.easing?Me(e.easing):null,n=e.grid,l=e.axis,c=e.from||0,u=c==="first",o=c==="center",x=c==="last",d=v.arr(r),f=parseFloat(d?r[0]:r),k=d?parseFloat(r[1]):0,N=J(d?r[1]:r)||0,E=e.start||0+(d?f:0),y=[],w=0;return function(L,b,p){if(u&&(c=0),o&&(c=(p-1)/2),x&&(c=p-1),!y.length){for(var j=0;j<p;j++){if(!n)y.push(Math.abs(c-j));else{var G=o?(n[0]-1)/2:c%n[0],A=o?(n[1]-1)/2:Math.floor(c/n[0]),Y=j%n[0],te=Math.floor(j/n[0]),X=G-Y,B=A-te,ee=Math.sqrt(X*X+B*B);l==="x"&&(ee=-X),l==="y"&&(ee=-B),y.push(ee)}w=Math.max.apply(Math,y)}a&&(y=y.map(function(U){return a(U/w)*w})),t==="reverse"&&(y=y.map(function(U){return l?U<0?U*-1:-U:Math.abs(w-U)}))}var se=d?(k-f)/w:f;return E+se*(Math.round(y[b]*100)/100)+N}}function Ur(r){r===void 0&&(r={});var e=S(r);return e.duration=0,e.add=function(t,a){var n=W.indexOf(e),l=e.children;n>-1&&W.splice(n,1);function c(k){k.passThrough=!0}for(var u=0;u<l.length;u++)c(l[u]);var o=ge(t,ye(we,r));o.targets=o.targets||r.targets;var x=e.duration;o.autoplay=!1,o.direction=e.direction,o.timelineOffset=v.und(a)?x:Ce(a,x),c(e),e.seek(o.timelineOffset);var d=S(o);c(d),l.push(d);var f=er(l,r);return e.delay=f.delay,e.endDelay=f.endDelay,e.duration=f.duration,e.seek(0),e.reset(),e.autoplay&&e.play(),e},e}S.version="3.2.1";S.speed=1;S.suspendWhenDocumentHidden=!0;S.running=W;S.remove=zr;S.get=Pe;S.set=Xe;S.convertPx=xe;S.path=Fr;S.setDashoffset=Sr;S.stagger=$r;S.timeline=Ur;S.easing=Me;S.penner=He;S.random=function(r,e){return Math.floor(Math.random()*(e-r+1))+r};class Hr{constructor(){z(this,"container",null);z(this,"box");z(this,"lid");z(this,"ribbonV");z(this,"ribbonH");z(this,"bow");z(this,"sparkles",[]);z(this,"idleAnimation",null)}async load(e,t){this.container=e;const n={birthday:{box:"#FFB6C1",lid:"#FF69B4",ribbon:"#FF1493",sparkle:"#FFD700"},wedding:{box:"#FFF0F5",lid:"#FFE4E1",ribbon:"#C0C0C0",sparkle:"#FFFFFF"},generic:{box:"#F0F0F0",lid:"#E0E0E0",ribbon:"#888888",sparkle:"#CCCCCC"}}[t];return this.container.innerHTML=`
      <div class="anime-gift-container">
        <div class="anime-gift-box">
          <div class="anime-gift-body" style="background: ${n.box}"></div>
          <div class="anime-gift-lid" style="background: ${n.lid}"></div>
          <div class="anime-ribbon-vertical" style="background: ${n.ribbon}"></div>
          <div class="anime-ribbon-horizontal" style="background: ${n.ribbon}"></div>
          <div class="anime-bow" style="background: ${n.ribbon}"></div>
          ${[...Array(6)].map((l,c)=>`
            <div class="sparkle sparkle-${c}" style="background: ${n.sparkle}"></div>
          `).join("")}
        </div>
      </div>
    `,this.box=this.container.querySelector(".anime-gift-box"),this.lid=this.container.querySelector(".anime-gift-lid"),this.ribbonV=this.container.querySelector(".anime-ribbon-vertical"),this.ribbonH=this.container.querySelector(".anime-ribbon-horizontal"),this.bow=this.container.querySelector(".anime-bow"),this.sparkles=Array.from(this.container.querySelectorAll(".sparkle")),console.log("[Anime.js] Birthday animation loaded"),Promise.resolve()}playIdle(){this.idleAnimation=S({targets:this.box,translateY:[0,-8,0],rotate:[0,-1,1,0],scale:[1,1.02,1],duration:2e3,easing:"easeInOutSine",loop:!0})}stopIdle(){this.idleAnimation&&(this.idleAnimation.pause(),this.idleAnimation=null)}async playShake(){return Promise.resolve()}async playUnwrap(){return Promise.resolve()}async playReveal(){return console.log("[Anime.js] Playing simple reveal sequence"),this.stopIdle(),S({targets:this.bow,translateY:[0,-20,-60,-120,-250,-400],translateX:[0,5,15,30,50,70],rotate:[0,-25,20,-15,45,90],scale:[1,1.05,1,.8,.6,.3],opacity:[1,1,.9,.7,.4,0],duration:800,easing:"easeInCubic"}),S({targets:this.ribbonV,translateY:[0,-50,-120,-220,-350],rotate:[0,10,25,45,70],opacity:[1,.9,.7,.4,0],scaleX:[1,.9,.7,.5,.3],duration:700,easing:"easeInCubic"}),S({targets:this.ribbonH,translateX:[0,30,80,150,250],translateY:[0,-20,-40,-60,-80],rotate:[0,-15,-30,-50,-75],opacity:[1,.9,.7,.4,0],scaleY:[1,.9,.7,.5,.3],duration:700,easing:"easeInCubic"}),await new Promise(e=>setTimeout(e,700)),S({targets:this.lid,translateY:-350,rotateX:-160,rotateZ:25,opacity:0,duration:600,easing:"easeInCubic"}),S({targets:this.box.querySelector(".anime-gift-body"),opacity:0,duration:600,easing:"easeOutQuad"}),await new Promise(e=>setTimeout(e,200)),this.sparkles.forEach((e,t)=>{const a=t/this.sparkles.length*Math.PI*2;S({targets:e,translateX:Math.cos(a)*200,translateY:Math.sin(a)*200-80,scale:[0,2.5,0],opacity:[0,1,0],duration:1e3,delay:t*50,easing:"easeOutQuad"})}),await new Promise(e=>setTimeout(e,400)),Promise.resolve()}destroy(){S.remove(this.box),S.remove(this.lid),S.remove(this.ribbonV),S.remove(this.ribbonH),S.remove(this.bow),this.sparkles.forEach(e=>S.remove(e)),this.container&&(this.container.innerHTML="")}}var ue={};(function r(e,t,a,n){var l=!!(e.Worker&&e.Blob&&e.Promise&&e.OffscreenCanvas&&e.OffscreenCanvasRenderingContext2D&&e.HTMLCanvasElement&&e.HTMLCanvasElement.prototype.transferControlToOffscreen&&e.URL&&e.URL.createObjectURL),c=typeof Path2D=="function"&&typeof DOMMatrix=="function",u=function(){if(!e.OffscreenCanvas)return!1;try{var s=new OffscreenCanvas(1,1),i=s.getContext("2d");i.fillRect(0,0,1,1);var h=s.transferToImageBitmap();i.createPattern(h,"no-repeat")}catch{return!1}return!0}();function o(){}function x(s){var i=t.exports.Promise,h=i!==void 0?i:e.Promise;return typeof h=="function"?new h(s):(s(o,o),null)}var d=function(s,i){return{transform:function(h){if(s)return h;if(i.has(h))return i.get(h);var g=new OffscreenCanvas(h.width,h.height),M=g.getContext("2d");return M.drawImage(h,0,0),i.set(h,g),g},clear:function(){i.clear()}}}(u,new Map),f=function(){var s=Math.floor(16.666666666666668),i,h,g={},M=0;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(i=function(T){var P=Math.random();return g[P]=requestAnimationFrame(function m(C){M===C||M+s-1<C?(M=C,delete g[P],T()):g[P]=requestAnimationFrame(m)}),P},h=function(T){g[T]&&cancelAnimationFrame(g[T])}):(i=function(T){return setTimeout(T,s)},h=function(T){return clearTimeout(T)}),{frame:i,cancel:h}}(),k=function(){var s,i,h={};function g(M){function T(P,m){M.postMessage({options:P||{},callback:m})}M.init=function(m){var C=m.transferControlToOffscreen();M.postMessage({canvas:C},[C])},M.fire=function(m,C,F){if(i)return T(m,null),i;var R=Math.random().toString(36).slice(2);return i=x(function(O){function D(V){V.data.callback===R&&(delete h[R],M.removeEventListener("message",D),i=null,d.clear(),F(),O())}M.addEventListener("message",D),T(m,R),h[R]=D.bind(null,{data:{callback:R}})}),i},M.reset=function(){M.postMessage({reset:!0});for(var m in h)h[m](),delete h[m]}}return function(){if(s)return s;if(!a&&l){var M=["var CONFETTI, SIZE = {}, module = {};","("+r.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join(`
`);try{s=new Worker(URL.createObjectURL(new Blob([M])))}catch(T){return typeof console<"u"&&typeof console.warn=="function"&&console.warn("🎊 Could not load worker",T),null}g(s)}return s}}(),N={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function E(s,i){return i?i(s):s}function y(s){return s!=null}function w(s,i,h){return E(s&&y(s[i])?s[i]:N[i],h)}function L(s){return s<0?0:Math.floor(s)}function b(s,i){return Math.floor(Math.random()*(i-s))+s}function p(s){return parseInt(s,16)}function j(s){return s.map(G)}function G(s){var i=String(s).replace(/[^0-9a-f]/gi,"");return i.length<6&&(i=i[0]+i[0]+i[1]+i[1]+i[2]+i[2]),{r:p(i.substring(0,2)),g:p(i.substring(2,4)),b:p(i.substring(4,6))}}function A(s){var i=w(s,"origin",Object);return i.x=w(i,"x",Number),i.y=w(i,"y",Number),i}function Y(s){s.width=document.documentElement.clientWidth,s.height=document.documentElement.clientHeight}function te(s){var i=s.getBoundingClientRect();s.width=i.width,s.height=i.height}function X(s){var i=document.createElement("canvas");return i.style.position="fixed",i.style.top="0px",i.style.left="0px",i.style.pointerEvents="none",i.style.zIndex=s,i}function B(s,i,h,g,M,T,P,m,C){s.save(),s.translate(i,h),s.rotate(T),s.scale(g,M),s.arc(0,0,1,P,m,C),s.restore()}function ee(s){var i=s.angle*(Math.PI/180),h=s.spread*(Math.PI/180);return{x:s.x,y:s.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:s.startVelocity*.5+Math.random()*s.startVelocity,angle2D:-i+(.5*h-Math.random()*h),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:s.color,shape:s.shape,tick:0,totalTicks:s.ticks,decay:s.decay,drift:s.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:s.gravity*3,ovalScalar:.6,scalar:s.scalar,flat:s.flat}}function se(s,i){i.x+=Math.cos(i.angle2D)*i.velocity+i.drift,i.y+=Math.sin(i.angle2D)*i.velocity+i.gravity,i.velocity*=i.decay,i.flat?(i.wobble=0,i.wobbleX=i.x+10*i.scalar,i.wobbleY=i.y+10*i.scalar,i.tiltSin=0,i.tiltCos=0,i.random=1):(i.wobble+=i.wobbleSpeed,i.wobbleX=i.x+10*i.scalar*Math.cos(i.wobble),i.wobbleY=i.y+10*i.scalar*Math.sin(i.wobble),i.tiltAngle+=.1,i.tiltSin=Math.sin(i.tiltAngle),i.tiltCos=Math.cos(i.tiltAngle),i.random=Math.random()+2);var h=i.tick++/i.totalTicks,g=i.x+i.random*i.tiltCos,M=i.y+i.random*i.tiltSin,T=i.wobbleX+i.random*i.tiltCos,P=i.wobbleY+i.random*i.tiltSin;if(s.fillStyle="rgba("+i.color.r+", "+i.color.g+", "+i.color.b+", "+(1-h)+")",s.beginPath(),c&&i.shape.type==="path"&&typeof i.shape.path=="string"&&Array.isArray(i.shape.matrix))s.fill(re(i.shape.path,i.shape.matrix,i.x,i.y,Math.abs(T-g)*.1,Math.abs(P-M)*.1,Math.PI/10*i.wobble));else if(i.shape.type==="bitmap"){var m=Math.PI/10*i.wobble,C=Math.abs(T-g)*.1,F=Math.abs(P-M)*.1,R=i.shape.bitmap.width*i.scalar,O=i.shape.bitmap.height*i.scalar,D=new DOMMatrix([Math.cos(m)*C,Math.sin(m)*C,-Math.sin(m)*F,Math.cos(m)*F,i.x,i.y]);D.multiplySelf(new DOMMatrix(i.shape.matrix));var V=s.createPattern(d.transform(i.shape.bitmap),"no-repeat");V.setTransform(D),s.globalAlpha=1-h,s.fillStyle=V,s.fillRect(i.x-R/2,i.y-O/2,R,O),s.globalAlpha=1}else if(i.shape==="circle")s.ellipse?s.ellipse(i.x,i.y,Math.abs(T-g)*i.ovalScalar,Math.abs(P-M)*i.ovalScalar,Math.PI/10*i.wobble,0,2*Math.PI):B(s,i.x,i.y,Math.abs(T-g)*i.ovalScalar,Math.abs(P-M)*i.ovalScalar,Math.PI/10*i.wobble,0,2*Math.PI);else if(i.shape==="star")for(var I=Math.PI/2*3,$=4*i.scalar,H=8*i.scalar,q=i.x,Q=i.y,oe=5,K=Math.PI/oe;oe--;)q=i.x+Math.cos(I)*H,Q=i.y+Math.sin(I)*H,s.lineTo(q,Q),I+=K,q=i.x+Math.cos(I)*$,Q=i.y+Math.sin(I)*$,s.lineTo(q,Q),I+=K;else s.moveTo(Math.floor(i.x),Math.floor(i.y)),s.lineTo(Math.floor(i.wobbleX),Math.floor(M)),s.lineTo(Math.floor(T),Math.floor(P)),s.lineTo(Math.floor(g),Math.floor(i.wobbleY));return s.closePath(),s.fill(),i.tick<i.totalTicks}function U(s,i,h,g,M){var T=i.slice(),P=s.getContext("2d"),m,C,F=x(function(R){function O(){m=C=null,P.clearRect(0,0,g.width,g.height),d.clear(),M(),R()}function D(){a&&!(g.width===n.width&&g.height===n.height)&&(g.width=s.width=n.width,g.height=s.height=n.height),!g.width&&!g.height&&(h(s),g.width=s.width,g.height=s.height),P.clearRect(0,0,g.width,g.height),T=T.filter(function(V){return se(P,V)}),T.length?m=f.frame(D):O()}m=f.frame(D),C=O});return{addFettis:function(R){return T=T.concat(R),F},canvas:s,promise:F,reset:function(){m&&f.cancel(m),C&&C()}}}function le(s,i){var h=!s,g=!!w(i||{},"resize"),M=!1,T=w(i,"disableForReducedMotion",Boolean),P=l&&!!w(i||{},"useWorker"),m=P?k():null,C=h?Y:te,F=s&&m?!!s.__confetti_initialized:!1,R=typeof matchMedia=="function"&&matchMedia("(prefers-reduced-motion)").matches,O;function D(I,$,H){for(var q=w(I,"particleCount",L),Q=w(I,"angle",Number),oe=w(I,"spread",Number),K=w(I,"startVelocity",Number),nr=w(I,"decay",Number),ar=w(I,"gravity",Number),ir=w(I,"drift",Number),Fe=w(I,"colors",j),or=w(I,"ticks",Number),Oe=w(I,"shapes"),sr=w(I,"scalar"),lr=!!w(I,"flat"),Ae=A(I),Le=q,pe=[],cr=s.width*Ae.x,ur=s.height*Ae.y;Le--;)pe.push(ee({x:cr,y:ur,angle:Q,spread:oe,startVelocity:K,color:Fe[Le%Fe.length],shape:Oe[b(0,Oe.length)],ticks:or,decay:nr,gravity:ar,drift:ir,scalar:sr,flat:lr}));return O?O.addFettis(pe):(O=U(s,pe,C,$,H),O.promise)}function V(I){var $=T||w(I,"disableForReducedMotion",Boolean),H=w(I,"zIndex",Number);if($&&R)return x(function(K){K()});h&&O?s=O.canvas:h&&!s&&(s=X(H),document.body.appendChild(s)),g&&!F&&C(s);var q={width:s.width,height:s.height};m&&!F&&m.init(s),F=!0,m&&(s.__confetti_initialized=!0);function Q(){if(m){var K={getBoundingClientRect:function(){if(!h)return s.getBoundingClientRect()}};C(K),m.postMessage({resize:{width:K.width,height:K.height}});return}q.width=q.height=null}function oe(){O=null,g&&(M=!1,e.removeEventListener("resize",Q)),h&&s&&(document.body.contains(s)&&document.body.removeChild(s),s=null,F=!1)}return g&&!M&&(M=!0,e.addEventListener("resize",Q,!1)),m?m.fire(I,q,oe):D(I,q,oe)}return V.reset=function(){m&&m.reset(),O&&O.reset()},V}var ne;function de(){return ne||(ne=le(null,{useWorker:!0,resize:!0})),ne}function re(s,i,h,g,M,T,P){var m=new Path2D(s),C=new Path2D;C.addPath(m,new DOMMatrix(i));var F=new Path2D;return F.addPath(C,new DOMMatrix([Math.cos(P)*M,Math.sin(P)*M,-Math.sin(P)*T,Math.cos(P)*T,h,g])),F}function ae(s){if(!c)throw new Error("path confetti are not supported in this browser");var i,h;typeof s=="string"?i=s:(i=s.path,h=s.matrix);var g=new Path2D(i),M=document.createElement("canvas"),T=M.getContext("2d");if(!h){for(var P=1e3,m=P,C=P,F=0,R=0,O,D,V=0;V<P;V+=2)for(var I=0;I<P;I+=2)T.isPointInPath(g,V,I,"nonzero")&&(m=Math.min(m,V),C=Math.min(C,I),F=Math.max(F,V),R=Math.max(R,I));O=F-m,D=R-C;var $=10,H=Math.min($/O,$/D);h=[H,0,0,H,-Math.round(O/2+m)*H,-Math.round(D/2+C)*H]}return{type:"path",path:i,matrix:h}}function ie(s){var i,h=1,g="#000000",M='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';typeof s=="string"?i=s:(i=s.text,h="scalar"in s?s.scalar:h,M="fontFamily"in s?s.fontFamily:M,g="color"in s?s.color:g);var T=10*h,P=""+T+"px "+M,m=new OffscreenCanvas(T,T),C=m.getContext("2d");C.font=P;var F=C.measureText(i),R=Math.ceil(F.actualBoundingBoxRight+F.actualBoundingBoxLeft),O=Math.ceil(F.actualBoundingBoxAscent+F.actualBoundingBoxDescent),D=2,V=F.actualBoundingBoxLeft+D,I=F.actualBoundingBoxAscent+D;R+=D+D,O+=D+D,m=new OffscreenCanvas(R,O),C=m.getContext("2d"),C.font=P,C.fillStyle=g,C.fillText(i,V,I);var $=1/h;return{type:"bitmap",bitmap:m.transferToImageBitmap(),matrix:[$,0,0,$,-R*$/2,-O*$/2]}}t.exports=function(){return de().apply(this,arguments)},t.exports.reset=function(){de().reset()},t.exports.create=le,t.exports.shapeFromPath=ae,t.exports.shapeFromText=ie})(function(){return typeof window<"u"?window:typeof self<"u"?self:this||{}}(),ue,!1);const qr=ue.exports;ue.exports.create;class Wr{burst(){if(window.matchMedia("(prefers-reduced-motion: reduce)").matches)return;const e=200,t={origin:{y:.5},zIndex:1e3};function a(n,l){qr({...t,...l,particleCount:Math.floor(e*n)})}a(.25,{spread:26,startVelocity:55}),a(.2,{spread:60}),a(.35,{spread:100,decay:.91,scalar:.8}),a(.1,{spread:120,startVelocity:25,decay:.92,scalar:1.2}),a(.1,{spread:120,startVelocity:45})}}class Gr{constructor(e,t){z(this,"state",{step:"loading",tapsRemaining:1,animationProgress:0});z(this,"animation",null);this.container=e,this.giftService=t}async initialize(e){try{const t=await this.giftService.getGift(e);if(t.isActivated){this.showAlreadyActivated(t);return}await this.renderGiftBox(t),t.isOpened||await this.giftService.markAsOpened(e),this.setupInteractions(t)}catch(t){this.showError(t.message)}}async renderGiftBox(e){this.container.innerHTML=`
      <div class="gift-reveal-container">
        <div class="gift-header">
          <p class="sender-text">Fra ${e.senderName}</p>
        </div>

        <div class="gift-box-wrapper">
          <div id="animation-container"></div>
          <div class="tap-indicator visible">
            <span class="tap-count">${this.state.tapsRemaining}</span>
            <span class="tap-text">trykk for å åpne</span>
          </div>
        </div>

        <div class="gift-content hidden" id="gift-content">
          <div class="gift-card">
            <div class="vendor-info">
              <div class="vendor-logo">
                <div class="placeholder-logo">${e.vendorName.charAt(0)}</div>
              </div>
              <h2 class="vendor-name">${e.vendorName}</h2>
            </div>
            <h1 class="gift-amount">${e.amount} kr</h1>
            ${e.personalMessage?`
              <div class="message-card">
                <p>${e.personalMessage}</p>
                <span class="sender">- ${e.senderName}</span>
              </div>
            `:""}
            <button class="cta-button" id="transfer-button">
              Hent gavekortet 🎁
            </button>
          </div>
        </div>
      </div>
    `,this.animation=new Hr,console.log("Using Anime.js animation engine"),await this.animation.load(document.getElementById("animation-container"),e.animationType),this.animation.playIdle(),this.state.step="ready"}setupInteractions(e){var a;const t=document.querySelector(".gift-box-wrapper");t==null||t.addEventListener("click",async()=>{this.state.tapsRemaining>0&&await this.handleTap()}),(a=document.getElementById("transfer-button"))==null||a.addEventListener("click",()=>{this.handleTransfer(e)})}async handleTap(){this.state.tapsRemaining--,this.animation&&this.state.tapsRemaining===0&&(this.state.step="revealed",this.triggerSynchronizedReveal())}async triggerSynchronizedReveal(){if(!this.animation)return;const e=document.querySelector(".tap-indicator");e&&e.classList.remove("visible");const t=this.animation.playReveal();setTimeout(()=>{new Wr().burst()},900),setTimeout(()=>{this.showGiftContent()},1300),await t}showGiftContent(){const e=document.querySelector(".gift-header");e&&(e.style.transition="opacity 0.3s ease",e.style.opacity="0",setTimeout(()=>{e.style.display="none"},300));const t=document.querySelector(".gift-box-wrapper");t&&(t.style.transition="opacity 0.4s ease",t.style.opacity="0",setTimeout(()=>{t.style.display="none"},400));const a=document.getElementById("gift-content");a&&(a.classList.remove("hidden"),a.style.opacity="0",a.style.transition="opacity 0.6s ease",requestAnimationFrame(()=>{requestAnimationFrame(()=>{a.style.opacity="1"})})),this.state.step="revealed"}handleTransfer(e){this.giftService.getTransferLink(e.code),alert("I en ekte implementasjon ville dette åpnet Mine Gavekort-appen"),this.state.step="transferred",this.showTransferred(e)}showAlreadyActivated(e){this.container.innerHTML=`
      <div class="status-container already-activated">
        <div class="status-icon">✅</div>
        <h1>Gavekortet er allerede hentet</h1>
        <p>Dette gavekortet på <strong>${e.amount} kr</strong> til <strong>${e.vendorName}</strong>
           er allerede lagt til i Mine Gavekort-appen.</p>
        <button class="cta-button" onclick="alert('Ville åpnet Mine Gavekort-appen')">
          Åpne Mine Gavekort
        </button>
      </div>
    `}showTransferred(e){this.container.innerHTML=`
      <div class="status-container transferred">
        <div class="status-icon">🎉</div>
        <h1>Gratulerer!</h1>
        <p>Gavekortet ditt på <strong>${e.amount} kr</strong> til <strong>${e.vendorName}</strong>
           er nå klart til bruk!</p>
        <button class="cta-button" onclick="window.location.reload()">
          Test på nytt
        </button>
      </div>
    `}showError(e){this.container.innerHTML=`
      <div class="status-container error-state">
        <div class="status-icon">😕</div>
        <h1>Noe gikk galt</h1>
        <p>${e}</p>
        <button class="cta-button" onclick="window.location.reload()">
          Prøv igjen
        </button>
      </div>
    `}}const Kr={id:"550e8400-e29b-41d4-a716-446655440000",vendorName:"H&M",vendorLogoUrl:"/images/vendors/placeholder-logo.svg",amount:500,currency:"NOK",personalMessage:"Gratulerer med dagen! Håper du finner noe fint 🎉",senderName:"Kari Nordmann",animationType:"birthday",expiryDate:"2025-12-31",isOpened:!1,isActivated:!1},Zr={id:"550e8400-e29b-41d4-a716-446655440001",vendorName:"Zalando",vendorLogoUrl:"/images/vendors/placeholder-logo.svg",amount:1e3,currency:"NOK",senderName:"Per Hansen",animationType:"generic",isOpened:!0,isActivated:!0},_r={id:"550e8400-e29b-41d4-a716-446655440002",vendorName:"Kitchn",vendorLogoUrl:"/images/vendors/placeholder-logo.svg",amount:2500,currency:"NOK",personalMessage:"Gratulerer med bryllupet! ❤️",senderName:"Familie Olsen",animationType:"wedding",isOpened:!1,isActivated:!1},Yr={error:"Dette gavekortet finnes ikke"},Qr={error:"Dette gavekortet har utløpt"},Ve={TEST1234:Kr,TESTUSED:Zr,TESTBRYL:_r,TESTERR1:Yr,TESTEXP1:Qr,default:{id:"550e8400-e29b-41d4-a716-446655440099",vendorName:"XXL",vendorLogoUrl:"/images/vendors/placeholder-logo.svg",amount:750,currency:"NOK",personalMessage:"Til deg!",senderName:"En venn",animationType:"generic",isOpened:!1,isActivated:!1}};class Jr{delay(e){return new Promise(t=>setTimeout(t,e))}async getGift(e){await this.delay(800);const t=Ve[e]||Ve.default;if(t.error)throw new Error(t.error);return{...t,code:e,expiryDate:t.expiryDate?new Date(t.expiryDate):void 0}}async markAsOpened(e){await this.delay(300),console.log(`[Mock] Gift ${e} marked as opened`)}getTransferLink(e){return{success:!0,appDeepLink:`#transferred-${e}`,fallbackUrl:"https://apps.apple.com/no/app/mine-gavekort/id123456"}}}function Xr(r=!0){return new Jr}const et={USE_MOCKS:!0};class rt{constructor(){z(this,"router");z(this,"container");this.container=document.getElementById("app"),this.router=new vr,this.initializeRoutes()}initializeRoutes(){this.router.register(/^\/g\/([a-zA-Z0-9]{8})$/,async e=>{const t=e[1];await new Gr(this.container,Xr(et.USE_MOCKS)).initialize(t)}),this.router.register(/^\/$/,()=>{this.showHomepage()}),this.router.register(/^.*$/,()=>{this.showError("Ugyldig gave-link")})}showHomepage(){this.container.innerHTML=`
      <div class="homepage">
        <h1>🎁 Gift Reveal PoC</h1>
        <p>Interaktiv gavekortåpning med <strong>Anime.js</strong> animasjoner</p>

        <div class="engine-section" style="background: linear-gradient(135deg, #fff5f7 0%, #ffe8ec 100%); border: 2px solid #ff1744;">
          <h2>✨ Test Gift Reveal (1 trykk)</h2>
          <div class="test-links">
            <a href="/g/TEST1234" class="test-link anime" style="font-size: 18px; padding: 20px 24px;">
              <span class="link-label">🎂 Bursdagsgave</span>
              <span class="link-code">TEST1234</span>
            </a>
            <a href="/g/TESTBRYL" class="test-link anime">
              <span class="link-label">💒 Bryllupsgave</span>
              <span class="link-code">TESTBRYL</span>
            </a>
          </div>
          <p style="margin-top: 16px; font-size: 14px; color: #666;">
            <strong>Ett trykk:</strong> Sløyfe knytes opp → Alt fades bort → Sparkles + konfetti → Gavekort fades inn!
          </p>
        </div>

        <div class="engine-section">
          <h3>⚠️ Test error states:</h3>
          <div class="test-links">
            <a href="/g/TESTUSED" class="test-link">
              <span class="link-label">✅ Allerede aktivert</span>
              <span class="link-code">TESTUSED</span>
            </a>
            <a href="/g/TESTERR1" class="test-link">
              <span class="link-label">❌ Feil - finnes ikke</span>
              <span class="link-code">TESTERR1</span>
            </a>
          </div>
        </div>

        <div class="engine-section" style="background: #f9f9f9;">
          <h3>📦 Teknisk info</h3>
          <ul style="text-align: left; font-size: 14px; color: #666; line-height: 1.8;">
            <li><strong>Framework:</strong> Vite + TypeScript</li>
            <li><strong>Animasjoner:</strong> Anime.js (~8 KB)</li>
            <li><strong>Konfetti:</strong> Canvas Confetti</li>
            <li><strong>Mobile-first:</strong> Optimalisert for iOS Safari/Chrome</li>
          </ul>
        </div>
      </div>
    `}showError(e){this.container.innerHTML=`
      <div class="status-container error-state">
        <div class="status-icon">😕</div>
        <h1>Oops!</h1>
        <p>${e}</p>
        <a href="/" class="cta-button">Tilbake til forsiden</a>
      </div>
    `}start(){const e=window.location.pathname;this.router.navigate(e),window.addEventListener("popstate",()=>{const t=window.location.pathname;this.router.navigate(t)}),document.addEventListener("click",t=>{const a=t.target.closest("a");if(a&&a.hostname===window.location.hostname){t.preventDefault();const n=a.pathname+a.search;window.history.pushState({},"",n),this.router.navigate(a.pathname)}})}}const tt=new rt;tt.start()});export default nt();
